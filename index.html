<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³ êµ CEO ì±Œë¦°ì§€: Money Game</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&family=Cinzel:wght@700&family=Black+Han+Sans&display=swap" rel="stylesheet">
    
    <style>
        /* --- ê³µí†µ ìŠ¤íƒ€ì¼ --- */
        :root {
            --bg-color: #f4f6f8; --nav-color: #1a2533; --gold-color: #d4af37;
            --blue-color: #2980b9; --red-color: #c0392b; --purple-color: #8e44ad; --green-color: #27ae60;
            --white-color: #ffffff; --card-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        body { font-family: 'Noto Sans KR', sans-serif; margin: 0; padding: 0; background-color: var(--bg-color); overflow-x: hidden; color: #333; }
        button { cursor: pointer; border: none; outline: none; transition: 0.2s; }
        button:hover { transform: translateY(-2px); opacity: 0.9; }

        /* í˜ì´ì§€ ë ˆì´ì•„ì›ƒ */
        .full-screen-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #2c3e50 0%, #0a0e14 100%); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9000; text-align: center; }
        #gamePage, #personnelPage { display: none; padding: 20px; min-height: 100vh; }
        #personnelPage { background-color: #eef2f3; }

        /* --- ìŠ¤í† ë¦¬ ëª¨ë“œ ìŠ¤íƒ€ì¼ --- */
        .story-page {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000; background-repeat: no-repeat; background-position: center; background-size: contain;
            z-index: 11000; display: none; flex-direction: column; justify-content: center; align-items: center;
        }

        /* ìŠ¤í† ë¦¬ 0 (ì‹œì‘ ë²„íŠ¼) */
        #storyPage0 { background-color: #000; display: flex; } 
        .btn-story-start {
            padding: 20px 50px; font-size: 2rem; font-family: 'Black Han Sans', sans-serif;
            color: var(--gold-color); background: transparent; border: 3px solid var(--gold-color);
            cursor: pointer; transition: 0.3s; letter-spacing: 2px;
        }
        .btn-story-start:hover { background: var(--gold-color); color: #000; box-shadow: 0 0 20px var(--gold-color); }

        /* ìŠ¤í† ë¦¬ 1 */
        #storyPage1 { background-image: url('ìŠ¤í† ë¦¬ 1.png'); }
        .story-text-box {
            background: rgba(0, 0, 0, 0.6); padding: 30px; border-radius: 10px; max-width: 80%;
            text-align: center; color: white; font-size: 1.5rem; line-height: 1.6;
            transition: opacity 1s; opacity: 0; position: absolute; bottom: 15%;
        }
        .story-highlight-red { color: #e74c3c; font-weight: 900; font-size: 1.8rem; }

        /* ìŠ¤í† ë¦¬ 2 - [ìˆ˜ì •1] í°íŠ¸ í¬ê¸° ëŒ€í­ í™•ëŒ€ */
        #storyPage2 { background-image: url('ìŠ¤í† ë¦¬ 2.png'); }
        .s2-text {
            position: absolute; font-family: 'Black Han Sans', sans-serif; 
            font-size: 4.5rem; /* í¬ê¸° í™•ëŒ€ */
            color: white; 
            text-shadow: 4px 4px 15px #000; /* ê·¸ë¦¼ì ì§„í•˜ê²Œ */
            opacity: 0; transition: opacity 1s;
            white-space: nowrap; /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
        }
        .s2-left { top: 40%; left: 10%; transform: translateY(-50%); }
        .s2-center { top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--gold-color); z-index: 5; }
        .s2-right { top: 60%; right: 10%; transform: translateY(-50%); }

        /* ìŠ¤í† ë¦¬ 3 - [ìˆ˜ì •2] ê°€ë…ì„± ë°•ìŠ¤ ì¶”ê°€ */
        #storyPage3 { background-image: url('ìŠ¤í† ë¦¬ 3.png'); }
        .s3-text-container {
            position: absolute; top: 15%; right: 5%; text-align: right;
            background: rgba(0, 0, 0, 0.75); /* ë°˜íˆ¬ëª… ê²€ì€ ë°°ê²½ */
            padding: 40px; 
            border-radius: 20px;
            border: 3px solid var(--gold-color); /* ê¸ˆìƒ‰ í…Œë‘ë¦¬ */
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            opacity: 0; animation: slideLeft 1s forwards;
            max-width: 80%;
        }
        .s3-text {
            font-family: 'Black Han Sans', sans-serif; font-size: 3rem; line-height: 1.4;
            color: #fff; text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .btn-story-next {
            position: absolute; bottom: 50px; right: 50px;
            padding: 15px 40px; font-size: 1.2rem; background: rgba(255, 255, 255, 0.2);
            color: white; border: 1px solid white; cursor: pointer; display: none; z-index: 10;
        }
        .btn-story-next:hover { background: white; color: black; }


        /* ê¸°ì¡´ ì‹œì‘ í™”ë©´ (ì±Œë¦°ì§€ ì‹œì‘) */
        #startScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('ì‹œì‘.png') no-repeat center center;
            background-size: contain; background-color: #000;
            z-index: 10000; display: none;
            flex-direction: column; justify-content: center; align-items: center;
        }
        .btn-main-start {
            padding: 20px 60px; font-size: 2.2rem; font-family: 'Noto Sans KR', sans-serif; font-weight: 900;
            color: #fff; background: rgba(0, 0, 0, 0.7); border: 3px solid var(--gold-color); border-radius: 50px;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.8); cursor: pointer; animation: pulse 2s infinite; letter-spacing: 2px;
            margin-top: 25vh;
        }
        .btn-main-start:hover { background: linear-gradient(45deg, #d4af37, #f1c40f); color: #000; transform: scale(1.05); }

        /* 1. ì¸íŠ¸ë¡œ */
        .main-title { font-family: 'Noto Sans KR', sans-serif; font-size: 3.5rem; font-weight: 900; color: var(--gold-color); text-shadow: 0 0 25px rgba(212, 175, 55, 0.6); margin-bottom: 10px; }
        .sub-title { font-size: 1.5rem; color: #bdc3c7; margin-bottom: 40px; font-weight: 300; }
        .story-text { font-size: 1.2rem; line-height: 1.8; color: #ecf0f1; margin-bottom: 30px; opacity: 0; transform: translateY(20px); transition: opacity 1s, transform 1s; }
        .story-highlight { color: var(--gold-color); font-weight: bold; font-size: 1.3rem; }
        .btn-gold { padding: 15px 40px; font-size: 1.3rem; font-weight: bold; color: #0a0e14; background: var(--gold-color); border-radius: 50px; box-shadow: 0 0 15px var(--gold-color); margin-top: 30px; }
        .branding-image { width: 100%; max-width: 500px; border-radius: 10px; margin: 20px auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); opacity: 0; animation: fadeIn 3s ease-in forwards 1s; }

        /* 2. ëŒ€ì‹œë³´ë“œ */
        header { background: var(--nav-color); color: var(--white-color); padding: 15px 30px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; box-shadow: var(--card-shadow); border-bottom: 4px solid var(--gold-color); margin-bottom: 20px; }
        .title-area { display: flex; flex-direction: column; }
        .title-area h1 { margin: 0; font-size: 1.8rem; letter-spacing: 1px; }
        .top-controls { margin-top: 10px; display: flex; gap: 10px; }
        .btn-team-control { background: #555; color: white; padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; }
        .btn-main-mission { 
            background: linear-gradient(to right, #8e44ad, #c0392b); color: white; padding: 10px 20px; 
            border-radius: 20px; font-weight: bold; font-size: 1.1rem; box-shadow: 0 0 10px rgba(142, 68, 173, 0.7);
            animation: pulse 2s infinite; 
        }

        .timer-area { display: flex; align-items: center; gap: 15px; }
        #timerDisplay { font-family: 'Courier New', monospace; font-size: 2.2rem; font-weight: 900; color: var(--gold-color); background: #000; padding: 8px 25px; border-radius: 5px; min-width: 120px; text-align: center; border: 2px solid #444; }
        .btn-start { background-color: #27ae60; color: white; padding: 10px 15px; border-radius: 5px; font-weight: bold; }
        .btn-stop { background-color: #e74c3c; color: white; padding: 10px 15px; border-radius: 5px; font-weight: bold; }
        .btn-reset { background-color: #7f8c8d; color: white; padding: 10px 15px; border-radius: 5px; font-weight: bold; }

        .control-panel { display: flex; gap: 15px; margin-bottom: 25px; align-items: flex-start; }
        .news-box { flex: 1; background: var(--white-color); padding: 15px; border-radius: 8px; border-left: 6px solid var(--nav-color); display: flex; flex-direction: column; justify-content: space-between; box-shadow: 0 2px 5px rgba(0,0,0,0.05); min-height: 140px; }
        .news-label { font-size: 1rem; font-weight: 900; color: #7f8c8d; margin-bottom: 8px; }
        .scope-badge { font-size: 0.8rem; padding: 2px 8px; border-radius: 4px; font-weight: bold; color: white; background: #95a5a6; display: inline-block; margin-left: 10px;}
        .news-text { font-size: 1.6rem; font-weight: bold; color: #333; word-break: keep-all; line-height: 1.4; margin-bottom: 15px; }
        
        .admin-controls { display: flex; gap: 5px; align-items: center; background: #eee; padding: 5px; border-radius: 5px; margin-top: 10px; }
        .admin-controls select, .admin-controls input { padding: 5px; border: 1px solid #ccc; border-radius: 3px; }
        .btn-apply { background: #2c3e50; color: white; padding: 5px 10px; border-radius: 3px; font-weight: bold; font-size: 0.9rem; }
        .button-group { display: flex; flex-direction: column; gap: 10px; min-width: 220px; }
        .btn-news { background-color: var(--nav-color); color: white; height: 50px; font-size: 1.1rem; border: 1px solid var(--gold-color); border-radius: 5px; font-weight: bold; }
        .btn-mission { background-color: var(--purple-color); color: white; height: 50px; font-size: 1.1rem; border-radius: 5px; font-weight: bold; }
        .btn-hr { background-color: #e67e22; color: white; height: 50px; font-size: 1.1rem; border-radius: 5px; font-weight: bold; border: 1px solid #d35400; }

        .grid-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        @media (min-width: 1400px) { .grid-container { grid-template-columns: repeat(4, 1fr); } }

        .team-card { background: var(--white-color); border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-top: 5px solid #ccc; position: relative; transition: all 0.3s; }
        .team-header { display: flex; flex-direction: column; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        
        .logo-wrapper { width: 100%; height: 80px; border: none; border-radius: 8px; display: flex; justify-content: center; align-items: center; cursor: pointer; overflow: hidden; margin-bottom: 10px; background-color: #fcfcfc; transition: 0.2s; }
        .logo-wrapper:hover { background-color: #f0f0f0; }
        .logo-placeholder { font-size: 0.8rem; color: #aaa; display: flex; flex-direction: column; align-items: center; }
        .team-logo { width: 100%; height: 100%; object-fit: contain; } 

        .team-name { font-size: 1.5rem; font-weight: 900; border: none; width: 100%; text-align: center; color: #333; background: transparent; margin-bottom: 5px;}
        .team-name:focus { outline: none; border-bottom: 2px solid var(--gold-color); }

        .input-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.95rem; color: #555; align-items: center; }
        .input-row.value-row { background: #fdf2e9; padding: 5px; border-radius: 4px; font-weight: bold; color: #d35400; }
        .num-input { width: 90px; text-align: right; padding: 4px; font-size: 1rem; font-weight: bold; border: 1px solid #ddd; border-radius: 4px; }
        .readonly-input { background-color: #f0f0f0; color: #7f8c8d; border: 1px dashed #ccc; pointer-events: none; }
        .tax-input { background-color: #f0f0f0; color: #7f8c8d; border: 1px dashed #ccc; pointer-events: none; }
        .total-money { font-size: 1.4rem; font-weight: 900; color: var(--nav-color); min-height: 35px; text-align: right; margin-top: 15px; }
        .bar-bg { background-color: #eee; height: 10px; border-radius: 5px; margin-top: 5px; overflow: hidden; }
        .bar-fill { height: 100%; width: 0%; transition: width 0.5s; background-color: var(--nav-color); }
        .btn-calc { background-color: var(--nav-color); color: white; width: 100%; padding: 15px; font-size: 1.2rem; margin-top: 20px; border-top: 3px solid var(--gold-color); font-weight: bold; border-radius: 5px; }

        .loan-area { background: #f9f9f9; padding: 10px; border-radius: 5px; margin-bottom: 15px; border: 1px solid #eee; }
        .loan-info { font-size: 0.8rem; color: #666; margin-bottom: 5px; display: flex; justify-content: space-between; }
        .btn-loan { width: 100%; background: #34495e; color: white; padding: 8px; border-radius: 4px; font-size: 0.9rem; font-weight: bold; }
        .loan-status { font-size: 0.8rem; color: #c0392b; margin-top: 5px; text-align: right; font-weight: bold; }

        .section-container { margin-top: 15px; border-top: 1px dashed #ccc; padding-top: 10px; }
        .section-title { font-weight: bold; color: #555; margin-bottom: 5px; display: flex; justify-content: space-between; align-items: center; }
        .btn-add-item { background: none; border: 1px solid #ccc; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; color: #555; font-weight: bold; font-size: 0.8rem;}
        .btn-add-item:hover { background: #eee; color: #000; }
        .card-count { color: #e67e22; font-size: 0.85rem; font-weight: bold; }
        .empty-message { font-size: 0.8rem; color: #aaa; text-align: center; padding: 5px; font-style: italic; }

        .item-tag { background: #eef2f3; padding: 4px 8px; border-radius: 4px; margin-bottom: 4px; font-size: 0.85rem; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ddd; }
        .item-tag span { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 80%; }
        .item-delete { cursor: pointer; color: #c0392b; font-weight: bold; margin-left: 5px; }

        .hired-item { background: #f0f0f0; padding: 6px 10px; border-radius: 4px; margin-bottom: 6px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ddd;}
        .hired-info { display: flex; flex-direction: column; width: 100%; }
        .hired-name-row { display: flex; justify-content: space-between; margin-bottom: 2px; }
        .hired-salary-tag { font-size: 0.75rem; color: #7f8c8d; font-weight: normal; }
        .hired-effect { font-size: 0.75rem; color: #e67e22; font-weight: bold; }
        .hired-expected { font-size: 0.75rem; color: var(--green-color); font-weight: bold; margin-top: 2px; }
        .hired-tenure { font-size: 0.7rem; color: #2980b9; font-weight: bold; margin-left: 5px; }
        .btn-fire { background-color: #e74c3c; color: white; border: none; padding: 4px 8px; font-size: 0.75rem; border-radius: 4px; margin-left: 10px; cursor: pointer; white-space: nowrap; height: 30px;}
        
        .grade-badge { font-weight: 900; margin-right: 4px; }
        .grade-badge.S { color: #d4af37; } .grade-badge.A { color: #c0392b; } .grade-badge.B { color: #2980b9; } 
        .grade-badge.C { color: #7f8c8d; } .grade-badge.Special { color: #8e44ad; }

        /* ëª¨ë‹¬ (íŒì—…) ìŠ¤íƒ€ì¼ */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 20000; display: none; justify-content: center; align-items: center; }
        .modal-content { background: white; width: 90%; max-width: 600px; padding: 30px; border-radius: 15px; text-align: center; position: relative; animation: slideDown 0.5s; border-top: 10px solid var(--purple-color); }
        .modal-title { font-size: 2rem; font-weight: 900; margin-bottom: 20px; color: var(--purple-color); }
        .modal-body { font-size: 1.5rem; font-weight: bold; margin-bottom: 30px; line-height: 1.6; white-space: pre-line; }
        .close-modal { position: absolute; top: 10px; right: 20px; font-size: 2rem; cursor: pointer; color: #aaa; }
        
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; text-align: left; }
        .shop-item { border: 1px solid #ddd; padding: 10px; border-radius: 8px; cursor: pointer; transition: 0.2s; position: relative;}
        .shop-item:hover { border-color: var(--gold-color); background: #fffbe6; }
        .shop-item-name { font-weight: bold; font-size: 1rem; margin-bottom: 5px; color: #333; }
        .shop-item-cost { font-size: 0.8rem; color: #c0392b; }
        .shop-item-effect { font-size: 0.75rem; color: var(--blue-color); margin-top: 5px; }

        /* ì¸ì¬ ì˜ì…ì†Œ */
        .personnel-header { background: white; padding: 20px; border-radius: 8px; box-shadow: var(--card-shadow); display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;}
        .btn-back { background-color: #7f8c8d; color: white; padding: 10px 20px; font-size: 1rem; border-radius: 5px; font-weight: bold; margin-left: 10px; }
        .tab-menu { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px; }
        .tab-btn { background: white; border: 2px solid #ddd; padding: 10px 20px; border-radius: 20px; font-weight: bold; color: #555; white-space: nowrap; }
        .tab-btn.active { background: var(--nav-color); color: white; border-color: var(--nav-color); }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
        .person-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: 2px solid transparent; transition: 0.2s; display: flex; flex-direction: column; position: relative; }
        .grade-S { border-color: #e1b12c; } .grade-A { border-color: #e74c3c; } .grade-B { border-color: #3498db; } .grade-C { border-color: #95a5a6; } .grade-Special { border-color: #8e44ad; }
        .bg-S { background: #e1b12c; } .bg-A { background: #e74c3c; } .bg-B { background: #3498db; } .bg-C { background: #95a5a6; } .bg-Special { background: #8e44ad; }
        .pc-header { padding: 10px; color: white; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .pc-body { padding: 15px; text-align: center; flex-grow: 1; }
        .pc-stat { color: #2980b9; font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; }
        .pc-salary { color: #333; font-size: 1rem; font-weight: bold; margin-bottom: 5px; }
        .pc-expected { color: var(--green-color); font-weight: 900; font-size: 0.9rem; margin-bottom: 10px; border-bottom: 1px dashed #eee; padding-bottom: 5px; }
        .pc-effect { font-size: 0.8rem; color: #e67e22; font-weight: bold; background: #fff3e0; padding: 5px; border-radius: 4px; margin-bottom: 5px; }
        .pc-penalty { font-size: 0.8rem; color: #c0392b; font-weight: bold; border-top: 1px dashed #ddd; padding-top: 5px; margin-top: 5px; }
        .hire-controls { border-top: 1px solid #eee; padding: 10px; display: flex; gap: 5px; justify-content: center; }
        .team-select { padding: 5px; border-radius: 4px; border: 1px solid #ddd; }
        .btn-hire-action { background: #27ae60; color: white; padding: 5px 10px; border-radius: 4px; font-size: 0.9rem; font-weight: bold; }
        .sold-out-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; color: white; font-size: 1.5rem; font-weight: 900; transform: rotate(-15deg); z-index: 20; pointer-events: none; border: 3px solid white; }
        .person-card.sold-out { opacity: 0.5; pointer-events: none; filter: grayscale(100%); }
        .person-card.sold-out .sold-out-overlay::after { content: "ë§¤ì¹­ ì™„ë£Œ"; }
        .person-card.locked { opacity: 0.8; pointer-events: none; background: #eee; }
        .person-card.locked .overlay { background: rgba(50,50,50,0.85); color: #ecf0f1; font-size: 1.2rem; font-weight: bold; flex-direction: column; }
        .person-card.locked .overlay i { font-size: 2rem; margin-bottom: 5px; }
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 10; pointer-events: none; border: 3px solid white; }

        .blink-red { animation: blink 1s infinite; background-color: #fdebd0; border-color: var(--red-color); }
        .blink-blue { animation: blink 1s infinite; background-color: #ebf5fb; border-color: var(--blue-color); }
        .blink-purple { animation: blink 1s infinite; background-color: #f3e5f5; border-color: var(--purple-color); }
        @keyframes blink { 50% { opacity: 0.7; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideLeft { from { transform: translateX(50px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 20px rgba(212, 175, 55, 0.8); } 50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(212, 175, 55, 1); } 100% { transform: scale(1); box-shadow: 0 0 20px rgba(212, 175, 55, 0.8); } }
        @keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>
    
    <div id="storyPage0" class="story-page" style="display:flex;">
        <button class="btn-story-start" onclick="startStory()"> &lt; ìŠ¤í† ë¦¬ ì‹œì‘ &gt; </button>
    </div>

    <div id="storyPage1" class="story-page">
        <div class="story-text-box" id="s1-text">ëŒ€í•œë¯¼êµ­ì„ ì´ëˆ ìµœê³ ì˜ ê¸°ì—… <span style="color:#f1c40f; font-weight:bold;">ì•„ì›ŒìŠ¤í† ë¦¬</span> ì†¡ëª…ì„ ëŒ€í‘œ.<br>ì€í‡´ë¥¼ ì•ë‘ê³  ëŒì•„ë³´ë‹ˆ ê¸°ì¨, í›„íšŒ ë§Œê°ì´ êµì°¨í•œë‹¤.</div>
        <button class="btn-story-next" id="btnS1Next" onclick="nextToStory2()">ë‹¤ ìŒ</button>
    </div>

    <div id="storyPage2" class="story-page">
        <div class="s2-text s2-left" id="s2-text1">ë¶€ë¥¼ ì›í•˜ë‚˜?</div>
        <div class="s2-text s2-center" id="s2-text2">ëª…ì˜ˆë¥¼ ì›í•˜ë‚˜?</div>
        <div class="s2-text s2-right" id="s2-text3">í˜ê³¼ ê¶Œë ¥ì„ ì›í•˜ë‚˜?</div>
        <button class="btn-story-next" id="btnS2Next" onclick="nextToStory3()">ë‹¤ ìŒ</button>
    </div>

    <div id="storyPage3" class="story-page">
        <div class="s3-text-container">
            <div class="s3-text">
                ì›í•œë‹¤ë©´ ëª¨ë‘ ì£¼ì§€!<br>
                <span style="color:#f1c40f; font-size:4rem;">í˜ì‹ í•˜ê³ , ë„ì „í•˜ë¼!</span><br>
                ëª¨ë“  ê²ƒì´ ë„ˆí¬ë“¤ì˜ ê²ƒì´ë‹¤!
            </div>
        </div>
        <button class="btn-story-next" id="btnS3Next" style="display: block;" onclick="finishStory()">ì±Œë¦°ì§€ ì‹œì‘</button>
    </div>

    <div id="startScreen">
        <button class="btn-main-start" onclick="goToIntro()">ì±Œë¦°ì§€ ì‹œì‘</button>
    </div>

    <div id="introPage" class="full-screen-page" style="display: none;">
        <div class="content-box">
            <div class="main-title">ê³ êµ CEO ì±Œë¦°ì§€: Money Game</div>
            <div class="sub-title">ëŒ€í•œë¯¼êµ­ ê²½ì œë¥¼ ì´ëŒì–´ê°ˆ ìƒˆë¡œìš´ ì£¼ì—­ì„ ì°¾ìŠµë‹ˆë‹¤</div>
            <div id="storyContainer1">
                <p class="story-text" id="line1-1">ë‹¹ì‹ ì—ê²Œ ì£¼ì–´ì§„ ì¢…ì£ëˆ <span class="story-highlight">5,000ë§Œ ì›.</span></p>
                <p class="story-text" id="line1-2">í•˜ì§€ë§Œ ì¸ì¬ë“¤ì˜ ëª¸ê°’ì€ ë¹„ìŒ‰ë‹ˆë‹¤.<br>ê¸°ëŒ€ ë§¤ì¶œì€ ì—°ë´‰ì˜ ì ˆë°˜ë„ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                <p class="story-text" id="line1-3">ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  <span class="story-highlight">ê¸°ì—… ê°€ì¹˜(ì ìˆ˜)</span>ë¥¼ ë†’ì´ê¸° ìœ„í•´<br>ê³¼ê°í•˜ê²Œ íˆ¬ìí•˜ê³  ìœ„ê¸°ë¥¼ ë°©ì–´í•˜ì‹­ì‹œì˜¤.</p>
            </div>
            <button class="btn-gold" id="enterBtn1" style="opacity:0;" onclick="showBrandingPage()">ë„ì „ ìˆ˜ë½ (NEXT)</button>
        </div>
    </div>

    <div id="brandingPage" class="full-screen-page" style="display: none;">
        <div class="content-box">
            <div class="main-title" style="font-size: 2.5rem;">ì •ì²´ì„±ì„ í™•ë¦½í•˜ë¼</div>
            <img src="https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80" alt="Business Strategy" class="branding-image">
            <p class="story-text" style="opacity: 1; transform: translateY(0); margin-top: 30px;">ë‹¹ì‹ ì˜ íŒ€ì€ ì„¸ìƒì— ì–´ë–¤ ê°€ì¹˜ë¥¼ ì „ë‹¬í•  ê²ƒì¸ê°€?<br>ì§€ê¸ˆ ì´ ìˆœê°„, ë‹¹ì‹ ì˜ ê¸°ì—…ì„ ì •ì˜í•˜ê³  <span class="story-highlight">ì—­ì‚¬ì˜ ì‹œì‘</span>ì„ ì•Œë ¤ë¼.</p>
            <button class="btn-gold" onclick="startGameDashboard()">ì‹œì¥ ì§„ì… (START GAME)</button>
        </div>
    </div>

    <div id="gamePage">
        <header>
            <div class="title-area">
                <h1>ê³ êµ CEO ì±Œë¦°ì§€: MONEY GAME</h1>
                <p>FY <span id="yearDisplay">2025</span> | <span id="roundDisplay">1 ë¼ìš´ë“œ (B/Cê¸‰ ì˜ì… ê°€ëŠ¥)</span></p>
                <div class="top-controls">
                    <button class="btn-team-control" onclick="addTeam()">+ ì¡° ì¶”ê°€</button>
                    <button class="btn-team-control" onclick="removeTeam()">- ì¡° ì‚­ì œ</button>
                    <button class="btn-main-mission" onclick="showMainMission()">ğŸ† ë©”ì¸ ë¯¸ì…˜</button>
                </div>
            </div>
            <div class="timer-area">
                <div style="text-align: right;">
                    <div class="timer-label">D-DAY</div>
                    <div id="timerDisplay">365ì¼</div>
                </div>
                <div>
                    <button class="btn-start" onclick="timerStart()">ì‹œì‘</button>
                    <button class="btn-stop" onclick="timerStop()">ì •ì§€</button>
                    <button class="btn-reset" onclick="timerReset()">ì´ˆê¸°í™”</button>
                </div>
            </div>
        </header>

        <div class="control-panel">
            <div class="news-box" id="newsBox">
                <div class="news-header">
                    <div class="news-label" id="newsLabel"></div>
                    <div class="scope-badge" id="scopeBadge" style="display:none;"></div>
                </div>
                <div class="news-text" id="newsText">ê²Œì„ì„ ì‹œì‘í•˜ë ¤ë©´ íƒ€ì´ë¨¸ 'ì‹œì‘' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</div>
                
                <div class="admin-controls">
                    <select id="manualTeamSelect" class="team-select-all"></select>
                    <input type="number" id="manualAmount" placeholder="ê¸ˆì•¡(ë§Œ)" style="width:80px;">
                    <select id="manualType">
                        <option value="rev">ë§¤ì¶œ(+)</option>
                        <option value="cost">ë¹„ìš©(+)</option>
                        <option value="cap_plus">ìë³¸(+)</option>
                        <option value="cap_minus">ìë³¸(-)</option>
                    </select>
                    <button class="btn-apply" onclick="applyManualEffect()">ì ìš©</button>
                </div>
                <div style="font-size:0.8rem; color:#aaa; margin-top:5px;" id="remainCount"></div>
            </div>
            <div class="button-group">
                <button class="btn-news" onclick="pickRandomNews()"><i class="fas fa-newspaper"></i> ê²½ì œ ë‰´ìŠ¤ ì†ë³´ (ëœë¤)</button>
                <button class="btn-mission" onclick="pickMission()"><i class="fas fa-bolt"></i> ëŒë°œ ë¯¸ì…˜</button>
                <button class="btn-hr" onclick="togglePersonnelPage()"><i class="fas fa-user-tie"></i> ì¸ì¬ ì˜ì…ì†Œ (HR)</button>
            </div>
        </div>

        <div class="grid-container" id="dashboardGrid"></div>

        <div style="text-align: center;">
            <button class="btn-calc" onclick="nextRound()">ğŸ”„ ì—°ë§ ê²°ì‚° ë° ë‹¤ìŒ í•´ë¡œ ì´ë™</button>
        </div>
    </div>

    <div id="personnelPage">
        <div class="personnel-header">
            <div class="personnel-title">
                <h2><i class="fas fa-users"></i> ê¸€ë¡œë²Œ ì¸ì¬ ì˜ì…ì†Œ</h2>
                <span style="color:#666; font-size: 0.9rem;">ì˜ì…ë¹„ìš©(1íšŒ)ê³¼ ì—°ë´‰(ë§¤ë…„) ë°œìƒ. ê·¼ì† ì—°ìˆ˜ì— ë”°ë¼ ë§¤ì¶œì´ 2ë°°ì”© ì¦ê°€í•©ë‹ˆë‹¤.</span>
            </div>
            <div class="search-area">
                <input type="text" id="searchInput" placeholder="ğŸ” ì¸ì¬ ì´ë¦„ ê²€ìƒ‰..." onkeyup="searchPersonnel()">
                <button class="btn-back" onclick="togglePersonnelPage()"> ëŒ€ì‹œë³´ë“œë¡œ ë³µê·€</button>
            </div>
        </div>

        <div class="tab-menu">
            <button class="tab-btn active" onclick="filterPersonnel('all', this)">ì „ì²´ ë³´ê¸°</button>
            <button class="tab-btn" onclick="filterPersonnel('dev', this)">ğŸ’» ê°œë°œ/ìƒì‚°</button>
            <button class="tab-btn" onclick="filterPersonnel('mkt', this)">ğŸ“¢ ë§ˆì¼€íŒ…/ì˜ì—…</button>
            <button class="tab-btn" onclick="filterPersonnel('mng', this)">ğŸ’¼ ê²½ì˜/ì „ëµ</button>
            <button class="tab-btn" onclick="filterPersonnel('special', this)">ğŸƒ íŠ¹ìˆ˜/ê¸°íƒ€</button>
        </div>

        <div class="card-grid" id="cardGrid"></div>
    </div>

    <div id="missionModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div class="modal-title" id="modalTitle">TITLE</div>
            <div class="modal-body" id="modalBody">Body Text</div>
            <div class="admin-controls" id="modalAdminControls" style="justify-content: center; margin-top:20px; display:none;">
                <select id="modalTeamSelect" class="team-select-all"></select>
                <input type="number" id="modalAmount" placeholder="ê¸ˆì•¡(ë§Œ)" style="width:100px;">
                <select id="modalType">
                    <option value="rev">ë§¤ì¶œ(+)</option>
                    <option value="cost">ë¹„ìš©(+)</option>
                    <option value="cap_plus">ìë³¸(+)</option>
                    <option value="cap_minus">ìë³¸(-)</option>
                </select>
                <button class="btn-apply" onclick="applyModalEffect()">ì ìš©</button>
            </div>
            <div id="shopGrid" class="shop-grid" style="display:none; margin-top:20px;"></div>
        </div>
    </div>


    <script>
        // *** ìŠ¤í† ë¦¬ ëª¨ë“œ ìŠ¤í¬ë¦½íŠ¸ ***
        function startStory() {
            document.getElementById('storyPage0').style.display = 'none';
            document.getElementById('storyPage1').style.display = 'flex';
            
            const textBox = document.getElementById('s1-text');
            setTimeout(() => { textBox.style.opacity = 1; }, 500);

            // 3ì´ˆ í›„ í…ìŠ¤íŠ¸ ë³€ê²½
            setTimeout(() => {
                textBox.style.opacity = 0;
                setTimeout(() => {
                    textBox.innerHTML = "<span class='story-highlight-red'>ê·¸ëŸ¬ë‚˜,</span><br>ìë…€ê°€ ì—†ì–´ í›„ê³„ìë¥¼ ì •í•˜ì§€ ëª»í•œ ê·¸ê°€<br>íŒŒê²©ì ì¸ ì œì•ˆì„ í•œë‹¤!";
                    textBox.style.opacity = 1;
                    document.getElementById('btnS1Next').style.display = 'inline-block';
                }, 1000);
            }, 3500);
        }

        function nextToStory2() {
            document.getElementById('storyPage1').style.display = 'none';
            document.getElementById('storyPage2').style.display = 'flex';
            
            setTimeout(() => { document.getElementById('s2-text1').style.opacity = 1; }, 500);
            setTimeout(() => { document.getElementById('s2-text2').style.opacity = 1; }, 2000);
            setTimeout(() => { document.getElementById('s2-text3').style.opacity = 1; }, 3500);
            setTimeout(() => { document.getElementById('btnS2Next').style.display = 'block'; }, 4000);
        }

        function nextToStory3() {
            document.getElementById('storyPage2').style.display = 'none';
            document.getElementById('storyPage3').style.display = 'flex';
        }

        function finishStory() {
            document.getElementById('storyPage3').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex'; // ê¸°ì¡´ ì‹œì‘ í™”ë©´ ë…¸ì¶œ
        }

        // *** 1. ë°ì´í„° ì •ì˜ (ìµœìƒë‹¨) ***
        let round = 1, year = 2025;
        let currentFilter = 'all';
        // baseCost: ì¸ê±´ë¹„ ë° ìˆ˜ë™ ì…ë ¥ ë¹„ìš© (ì‚¬ë¬´ì‹¤/ë³µì§€ ë¹„ìš© ì œì™¸)
        let teams = [
            { id: 1, name: '1ì¡°', color: '#3498db', logo: null, valueUps: [], welfares: [], baseCost: 0 },
            { id: 2, name: '2ì¡°', color: '#e67e22', logo: null, valueUps: [], welfares: [], baseCost: 0 },
            { id: 3, name: '3ì¡°', color: '#9b59b6', logo: null, valueUps: [], welfares: [], baseCost: 0 },
            { id: 4, name: '4ì¡°', color: '#2ecc71', logo: null, valueUps: [], welfares: [], baseCost: 0 }
        ];
        let teamLoans = { 1: [], 2: [], 3: [], 4: [] };

        const mainMissions = {
            1: "ì„¤ë¦½ ì´ˆê¸°: íŒ€ì˜ ë¹„ì „ì„ ì •í•˜ê³  ë¡œê³ ë¥¼ ë“±ë¡í•˜ì„¸ìš”. (+500ë§Œ)",
            2: "ì‹œì¥ ì§„ì…: Bê¸‰ ì´ìƒì˜ ì¸ì¬ë¥¼ 2ëª… ì´ìƒ ì˜ì…í•˜ì„¸ìš”. (+1,000ë§Œ)",
            3: "ì„±ì¥: ì—° ë§¤ì¶œ 3ì–µ ì›ì„ ë‹¬ì„±í•˜ì„¸ìš”. (+2,000ë§Œ)",
            4: "ì•ˆì •í™”: ì‚¬ì˜¥(ê±´ë¬¼)ì„ ë§¤ì…í•˜ì„¸ìš”. (ê¸°ì—…ê°€ì¹˜ +1000)"
        };

        const valueUpItems = [
            { id: 'v1', name: 'ì‘ì€ ì‚¬ë¬´ì‹¤', cost: 0, maintenance: 2400, value: 100 },
            { id: 'v2', name: 'ì¤‘ê°„ ì‚¬ë¬´ì‹¤', cost: 0, maintenance: 3600, value: 150 },
            { id: 'v3', name: 'í° ì‚¬ë¬´ì‹¤', cost: 0, maintenance: 6000, value: 200 },
            { id: 'v4', name: 'ì‚¬ì˜¥(ê±´ë¬¼)', cost: 100000, maintenance: 10000, value: 1000 }
        ];
        
        // [ìˆ˜ì •1 & 3] ì„±ì¥ë¥  ì¡°ì • (5%, 10%) ë° ì„¤ëª… í…ìŠ¤íŠ¸ ì œê±°
        const welfareItems = [
            { id: 'w1', name: 'ì„±ê³¼ê¸ˆ 100%', type: 'recurring', costRate: 1.0, growthRate: 0.05, desc: 'ì „ ì§ì› ì›”ê¸‰ 100%(1ê°œì›”ì¹˜) ì§€ê¸‰' },
            { id: 'w2', name: 'ì„±ê³¼ê¸ˆ 200%', type: 'recurring', costRate: 2.0, growthRate: 0.10, desc: 'ì „ ì§ì› ì›”ê¸‰ 200%(2ê°œì›”ì¹˜) ì§€ê¸‰' },
            { id: 'w3', name: 'ì—…ë¬´ëŠ” í…œë¹¨', type: 'one-time', cost: 5000, value: 50, desc: 'ì¼íšŒì„± ë¹„ìš© 5ì²œ, ê¸°ì—…ê°€ì¹˜ +50' }
        ];

        const personnelData = [
            { id:1, type: 'dev', name: 'ì²œì¬ AI ê°œë°œì', grade: 'S', stat: 'ê¸°ìˆ ë ¥ +50', salary: 10000, salaryDisplay: '1ì–µ', revenue: 5000, expected: 'ğŸ’° ë§¤ì¶œ +5,000ë§Œ', effect: 'ê²½ìŸì‚¬ í•´í‚¹ ë°©ì–´', penaltyVal: 15000, penalty: 'ìœ„ì•½ê¸ˆ 1.5ì–µ', owner: null },
            { id:2, type: 'dev', name: 'ì• í”Œ ì¶œì‹  ë””ìì´ë„ˆ', grade: 'S', stat: 'ë¸Œëœë“œ +40', salary: 9000, salaryDisplay: '9,000ë§Œ', revenue: 4500, expected: 'ğŸ’° ë§¤ì¶œ +4,500ë§Œ', effect: 'ì œí’ˆ ê°€ê²© 1.5ë°° ì±…ì •', penaltyVal: 13000, penalty: 'ìœ„ì•½ê¸ˆ 1.3ì–µ', owner: null },
            { id:51, type: 'dev', name: 'ìš°ì£¼ê³µí•™ ì „ë¬¸ê°€', grade: 'S', stat: 'ê¸°ìˆ ë ¥ +50', salary: 10000, salaryDisplay: '1ì–µ', revenue: 5000, expected: 'ğŸ’° ë§¤ì¶œ +5,000ë§Œ', effect: 'ì‹ ê¸°ìˆ  íŠ¹í—ˆ ë¶€ìŠ¤íŠ¸', penaltyVal: 15000, penalty: 'ìœ„ì•½ê¸ˆ 1.5ì–µ', owner: null },
            { id:52, type: 'dev', name: 'ë°”ì´ì˜¤ ìƒëª…ê³µí•™ì', grade: 'S', stat: 'ê¸°ìˆ ë ¥ +50', salary: 10000, salaryDisplay: '1ì–µ', revenue: 5000, expected: 'ğŸ’° ë§¤ì¶œ +5,000ë§Œ', effect: 'ì‹ ì•½ ê°œë°œ ì„±ê³µ í™•ë¥  UP', penaltyVal: 15000, penalty: 'ìœ„ì•½ê¸ˆ 1.5ì–µ', owner: null },
            { id:3, type: 'dev', name: 'í’€ìŠ¤íƒ ê°œë°œì', grade: 'A', stat: 'ê¸°ìˆ ë ¥ +30', salary: 7000, salaryDisplay: '7,000ë§Œ', revenue: 3500, expected: 'ğŸ’° ë§¤ì¶œ +3,500ë§Œ', effect: 'í˜¼ìì„œ 2ì¸ë¶„', penaltyVal: 5000, penalty: 'ìœ„ì•½ê¸ˆ 5,000ë§Œ', owner: null },
            { id:4, type: 'dev', name: 'ê³µì¥ ìë™í™” ë§ˆìŠ¤í„°', grade: 'A', stat: 'ìƒì‚°ë ¥ +30', salary: 6500, salaryDisplay: '6,500ë§Œ', revenue: 3000, expected: 'ğŸ’° ë§¤ì¶œ +3,000ë§Œ', effect: 'ìƒì‚° ë¯¸ì…˜ ì‹œê°„ ì—°ì¥', penaltyVal: 4000, penalty: 'ê³µì¥ ì¬ì„¤ì •ë¹„ 4,000ë§Œ', owner: null },
            { id:5, type: 'dev', name: 'í™”ì´íŠ¸í•´ì»¤', grade: 'A', stat: 'ê¸°ìˆ ë ¥ +25', salary: 6000, salaryDisplay: '6,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ì •ë³´ ìœ ì¶œ ìœ„ê¸° ë©´ì œ', penaltyVal: 4000, penalty: 'ë³´ì•ˆ ë³µêµ¬ë¹„ 4,000ë§Œ', owner: null },
            { id:53, type: 'dev', name: 'ë¸”ë¡ì²´ì¸ ì „ë¬¸ê°€', grade: 'A', stat: 'ê¸°ìˆ ë ¥ +30', salary: 7000, salaryDisplay: '7,000ë§Œ', revenue: 3500, expected: 'ğŸ’° ë§¤ì¶œ +3,500ë§Œ', effect: 'ê°€ìƒí™”í ê²°ì œ ì‹œìŠ¤í…œ ë„ì…', penaltyVal: 5000, penalty: 'ìœ„ì•½ê¸ˆ 5,000ë§Œ', owner: null },
            { id:54, type: 'dev', name: 'ë°ì´í„° ì„¼í„°ì¥', grade: 'A', stat: 'ê¸°ìˆ ë ¥ +25', salary: 6500, salaryDisplay: '6,500ë§Œ', revenue: 3000, expected: 'ğŸ’° ë§¤ì¶œ +3,000ë§Œ', effect: 'ì„œë²„ ì•ˆì •í™”', penaltyVal: 4500, penalty: 'ìœ„ì•½ê¸ˆ 4,500ë§Œ', owner: null },
            { id:6, type: 'dev', name: 'ë² í…Œë‘ ì—”ì§€ë‹ˆì–´', grade: 'B', stat: 'ê¸°ìˆ ë ¥ +20', salary: 5000, salaryDisplay: '5,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: '-', penaltyVal: 2000, penalty: 'í‡´ì§ê¸ˆ 2,000ë§Œ', owner: null },
            { id:7, type: 'dev', name: 'UI/UX ë””ìì´ë„ˆ', grade: 'B', stat: 'ë¸Œëœë“œ +15', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: '-', penaltyVal: 1500, penalty: 'ë””ìì¸ ì €ì‘ê¶Œë£Œ 1,500ë§Œ', owner: null },
            { id:8, type: 'dev', name: 'í’ˆì§ˆ ê´€ë¦¬ì(QC)', grade: 'B', stat: 'í’ˆì§ˆ +20', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ë¶ˆëŸ‰í’ˆ ë²Œê¸ˆ ë©´ì œ', penaltyVal: 1500, penalty: 'í‡´ì§ê¸ˆ 1,500ë§Œ', owner: null },
            { id:55, type: 'dev', name: 'ìœ íŠœë¸Œ í¸ì§‘ì', grade: 'B', stat: 'ê¸°ìˆ ë ¥ +15', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 1500, expected: 'ğŸ’° ë§¤ì¶œ +1,500ë§Œ', effect: 'í™ë³´ì˜ìƒ ì œì‘ ì†ë„ UP', penaltyVal: 1000, penalty: 'í‡´ì§ê¸ˆ 1,000ë§Œ', owner: null },
            { id:9, type: 'dev', name: 'ì„±ì‹¤í•œ ì½”ë”© ë…¸ì˜ˆ', grade: 'C', stat: 'ê¸°ìˆ ë ¥ +10', salary: 3000, salaryDisplay: '3,000ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: 'ì•¼ê·¼ ê°€ëŠ¥', penaltyVal: 500, penalty: 'í‡´ì§ê¸ˆ 500ë§Œ', owner: null },
            { id:10, type: 'dev', name: 'ì†ì´ ë¹ ë¥¸ ì¡°ë¦½ê³µ', grade: 'C', stat: 'ìƒì‚°ë ¥ +15', salary: 3000, salaryDisplay: '3,000ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: '-', penaltyVal: 500, penalty: 'í‡´ì§ê¸ˆ 500ë§Œ', owner: null },
            { id:56, type: 'dev', name: 'ë‹¨ê¸° ì•„ë¥´ë°”ì´íŠ¸', grade: 'C', stat: 'ìƒì‚°ë ¥ +5', salary: 2000, salaryDisplay: '2,000ë§Œ', revenue: 500, expected: 'ğŸ’° ë§¤ì¶œ +500ë§Œ', effect: '-', penaltyVal: 200, penalty: 'ìœ„ì•½ê¸ˆ 200ë§Œ', owner: null },
            { id:11, type: 'mkt', name: '100ë§Œ ìœ íŠœë²„', grade: 'S', stat: 'í™ë³´ë ¥ +50', salary: 10000, salaryDisplay: '1ì–µ', revenue: 5000, expected: 'ğŸ’° ë§¤ì¶œ +5,000ë§Œ', effect: 'SNS ë¯¸ì…˜ ìë™ ì„±ê³µ', penaltyVal: 20000, penalty: 'ìœ„ì•½ê¸ˆ 2ì–µ', owner: null },
            { id:12, type: 'mkt', name: 'ì „ì„¤ì˜ ì˜ì—…ì™•', grade: 'S', stat: 'íŒë§¤ë ¥ +40', salary: 8500, salaryDisplay: '8,500ë§Œ', revenue: 4000, expected: 'ğŸ’° ë§¤ì¶œ +4,000ë§Œ', effect: 'ê²½ìŸì‚¬ ë§¤ì¶œ 10% í¡ìˆ˜', penaltyVal: 15000, penalty: 'ê³ ê° ìœ ì¶œ ì†ì‹¤ 1.5ì–µ', owner: null },
            { id:57, type: 'mkt', name: 'ê¸€ë¡œë²Œ M&A ì „ë¬¸ê°€', grade: 'S', stat: 'íŒë§¤ë ¥ +50', salary: 10000, salaryDisplay: '1ì–µ', revenue: 5000, expected: 'ğŸ’° ë§¤ì¶œ +5,000ë§Œ', effect: 'ê¸°ì—… ì¸ìˆ˜ ì‹œ ë¹„ìš© í• ì¸', penaltyVal: 15000, penalty: 'ìœ„ì•½ê¸ˆ 1.5ì–µ', owner: null },
            { id:58, type: 'mkt', name: 'ì „ì§ ì¥ê´€', grade: 'S', stat: 'í™ë³´ë ¥ +50', salary: 10000, salaryDisplay: '1ì–µ', revenue: 5000, expected: 'ğŸ’° ë§¤ì¶œ +5,000ë§Œ', effect: 'ì •ë¶€ ê³¼ì œ ìˆ˜ì£¼ í™•ë¥  UP', penaltyVal: 20000, penalty: 'ì´ë¯¸ì§€ ì‹¤ì¶” ì†ì‹¤ 2ì–µ', owner: null },
            { id:13, type: 'mkt', name: 'ì¹´í”¼ë¼ì´íŒ… ì¥ì¸', grade: 'A', stat: 'ë¸Œëœë“œ +30', salary: 7000, salaryDisplay: '7,000ë§Œ', revenue: 3500, expected: 'ğŸ’° ë§¤ì¶œ +3,500ë§Œ', effect: '-', penaltyVal: 5000, penalty: 'ìœ„ì•½ê¸ˆ 5,000ë§Œ', owner: null },
            { id:14, type: 'mkt', name: 'ê¸€ë¡œë²Œ ë§ˆì¼€í„°', grade: 'A', stat: 'í•´ì™¸ì˜ì—… +30', salary: 7500, salaryDisplay: '7,500ë§Œ', revenue: 3500, expected: 'ğŸ’° ë§¤ì¶œ +3,500ë§Œ', effect: 'í™˜ìœ¨ í•˜ë½ ì‹œ ì´ë“', penaltyVal: 5000, penalty: 'í•´ì™¸ ì§€ì‚¬ ì² ìˆ˜ë¹„ 5,000ë§Œ', owner: null },
            { id:15, type: 'mkt', name: 'ë°ì´í„° ë¶„ì„ê°€', grade: 'A', stat: 'ë¶„ì„ë ¥ +25', salary: 6000, salaryDisplay: '6,000ë§Œ', revenue: 3000, expected: 'ğŸ’° ë§¤ì¶œ +3,000ë§Œ', effect: 'ìœ„ê¸°/í˜¸ì¬ ë¯¸ë¦¬ë³´ê¸°', penaltyVal: 4000, penalty: 'ìœ„ì•½ê¸ˆ 4,000ë§Œ', owner: null },
            { id:59, type: 'mkt', name: 'ë¸Œëœë“œ ê±´ì¶•ê°€', grade: 'A', stat: 'ë¸Œëœë“œ +35', salary: 7500, salaryDisplay: '7,500ë§Œ', revenue: 3500, expected: 'ğŸ’° ë§¤ì¶œ +3,500ë§Œ', effect: 'ë¸Œëœë“œ ê°€ì¹˜ ìƒìŠ¹', penaltyVal: 5000, penalty: 'ìœ„ì•½ê¸ˆ 5,000ë§Œ', owner: null },
            { id:16, type: 'mkt', name: 'SNS ì¤‘ë…ì', grade: 'B', stat: 'í™ë³´ë ¥ +20', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'íŠ¸ë Œë“œ íŒíŠ¸ ì œê³µ', penaltyVal: 2000, penalty: 'ë§ˆì¼€íŒ…ë¹„ 2,000ë§Œ ì†ì‹¤', owner: null },
            { id:17, type: 'mkt', name: 'íŒŒì›Œ ë¸”ë¡œê±°', grade: 'B', stat: 'í™ë³´ë ¥ +15', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: '-', penaltyVal: 1000, penalty: 'ì•…ì„± ë£¨ë¨¸ ë²Œê¸ˆ 1,000ë§Œ', owner: null },
            { id:18, type: 'mkt', name: 'CS íŒ€ì¥', grade: 'B', stat: 'í‰íŒ +20', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ë¶ˆë§¤ ìš´ë™ ë°©ì–´', penaltyVal: 1500, penalty: 'í‡´ì§ê¸ˆ 1,500ë§Œ', owner: null },
            { id:60, type: 'mkt', name: 'ë§¤ì¥ ë§¤ë‹ˆì €', grade: 'B', stat: 'íŒë§¤ë ¥ +20', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ì˜¤í”„ë¼ì¸ ë§¤ì¶œ ì¦ëŒ€', penaltyVal: 1500, penalty: 'í‡´ì§ê¸ˆ 1,500ë§Œ', owner: null },
            { id:19, type: 'mkt', name: 'ì „ë‹¨ì§€ ë°°í¬ì˜ ì‹ ', grade: 'C', stat: 'íŒë§¤ë ¥ +10', salary: 3000, salaryDisplay: '3,000ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: 'ëª¸ì“°ëŠ” ë¯¸ì…˜ ê°€ì‚°ì ', penaltyVal: 500, penalty: 'í‡´ì§ê¸ˆ 500ë§Œ', owner: null },
            { id:20, type: 'mkt', name: 'ì¹œí™”ë ¥ ê°‘ ì‹ ì…', grade: 'C', stat: 'ì˜ì—…ë ¥ +10', salary: 3200, salaryDisplay: '3,200ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: '-', penaltyVal: 500, penalty: 'í‡´ì§ê¸ˆ 500ë§Œ', owner: null },
            { id:61, type: 'mkt', name: 'ì „í™” ìƒë‹´ì›', grade: 'C', stat: 'ì˜ì—…ë ¥ +5', salary: 2500, salaryDisplay: '2,500ë§Œ', revenue: 500, expected: 'ğŸ’° ë§¤ì¶œ +500ë§Œ', effect: 'ê³ ê° ì‘ëŒ€', penaltyVal: 300, penalty: 'ìœ„ì•½ê¸ˆ 300ë§Œ', owner: null },
            { id:21, type: 'mng', name: 'ì›”ê°€ì˜ íˆ¬ì ê·€ì¬', grade: 'S', stat: 'ìê¸ˆë ¥ +50', salary: 10000, salaryDisplay: '1ì–µ', revenue: 5000, expected: 'ğŸ’° ë§¤ì¶œ +5,000ë§Œ', effect: 'ë§¤ ë¼ìš´ë“œ 10% ì´ì', penaltyVal: 20000, penalty: 'íˆ¬ì ì†ì‹¤ 2ì–µ', owner: null },
            { id:22, type: 'mng', name: 'ê¹€ì•¤ì¥ ì¶œì‹  ë³€í˜¸ì‚¬', grade: 'S', stat: 'ë°©ì–´ë ¥ +40', salary: 9000, salaryDisplay: '9,000ë§Œ', revenue: 4500, expected: 'ğŸ’° ë§¤ì¶œ +4,500ë§Œ', effect: 'ëª¨ë“  ë²•ì  ë²Œê¸ˆ ë©´ì œ', penaltyVal: 15000, penalty: 'ë²•ë¥  ìë¬¸ë£Œ 1.5ì–µ ì²­êµ¬', owner: null },
            { id:23, type: 'mng', name: 'ì¹¼ê°™ì€ íšŒê³„ì‚¬', grade: 'A', stat: 'ì ˆì„¸ +30', salary: 7000, salaryDisplay: '7,000ë§Œ', revenue: 3500, expected: 'ğŸ’° ë§¤ì¶œ +3,500ë§Œ', effect: 'ì„¸ê¸ˆ/ë¹„ìš© 20% ê°ë©´', penaltyVal: 5000, penalty: 'ì„¸ë¬´ ì¡°ì‚¬ ë¦¬ìŠ¤í¬ ì¦ê°€', owner: null },
            { id:24, type: 'mng', name: 'ì¸ì‚¬íŒ€ì¥(í—¤ë“œí—Œí„°)', grade: 'A', stat: 'ì¸ì‚¬ +30', salary: 6000, salaryDisplay: '6,000ë§Œ', revenue: 3000, expected: 'ğŸ’° ë§¤ì¶œ +3,000ë§Œ', effect: 'ì¸ì¬ ì˜ì… í• ì¸', penaltyVal: 4000, penalty: 'ìœ„ì•½ê¸ˆ 4,000ë§Œ', owner: null },
            { id:25, type: 'mng', name: 'í˜‘ìƒì˜ ë‹¬ì¸', grade: 'A', stat: 'í˜‘ìƒë ¥ +25', salary: 6500, salaryDisplay: '6,500ë§Œ', revenue: 3000, expected: 'ğŸ’° ë§¤ì¶œ +3,000ë§Œ', effect: 'ì›ìì¬ êµ¬ë§¤ í• ì¸', penaltyVal: 4000, penalty: 'ê±°ë˜ì²˜ ëŠê¹€ (ë¹„ìš© 4,000ë§Œ)', owner: null },
            { id:62, type: 'mng', name: 'ìˆ˜ì„ ì•„íŠ¸ ë””ë ‰í„°', grade: 'A', stat: 'ë¸Œëœë“œ +30', salary: 7000, salaryDisplay: '7,000ë§Œ', revenue: 3500, expected: 'ğŸ’° ë§¤ì¶œ +3,500ë§Œ', effect: 'ë¸Œëœë“œ ë¦¬ë‰´ì–¼', penaltyVal: 5000, penalty: 'ìœ„ì•½ê¸ˆ 5,000ë§Œ', owner: null },
            { id:26, type: 'mng', name: 'ê¼¼ê¼¼í•œ ì´ë¬´', grade: 'B', stat: 'ê´€ë¦¬ +20', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ë¶ˆí•„ìš” ì§€ì¶œ ë°©ì§€', penaltyVal: 1500, penalty: 'ë¹„í’ˆ ì¬êµ¬ë§¤ë¹„ 1,500ë§Œ', owner: null },
            { id:27, type: 'mng', name: 'ì •ë³´ ìˆ˜ì§‘ê°€', grade: 'B', stat: 'ì •ë³´ +20', salary: 5000, salaryDisplay: '5,000ë§Œ', revenue: 2500, expected: 'ğŸ’° ë§¤ì¶œ +2,500ë§Œ', effect: 'íƒ€ íŒ€ ìì‚° ì—¿ë³´ê¸°', penaltyVal: 2000, penalty: 'ë³´ì•ˆ ìœ„ê·œ ë²Œê¸ˆ 2,000ë§Œ', owner: null },
            { id:28, type: 'mng', name: 'ë³µì§€ ë‹´ë‹¹ ë§¤ë‹ˆì €', grade: 'B', stat: 'ì‚¬ê¸° +15', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'íŒŒì—… ìœ„ê¸° ë¬´íš¨í™”', penaltyVal: 1500, penalty: 'í‡´ì§ê¸ˆ 1,500ë§Œ', owner: null },
            { id:63, type: 'mng', name: 'í•´ì™¸ í†µì—­ì‚¬', grade: 'B', stat: 'ì†Œí†µ +20', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'í•´ì™¸ ë°”ì´ì–´ ì†Œí†µ', penaltyVal: 1500, penalty: 'ìœ„ì•½ê¸ˆ 1,500ë§Œ', owner: null },
            { id:29, type: 'mng', name: 'ì—‘ì…€ ë§ˆìŠ¤í„°', grade: 'C', stat: 'ì—…ë¬´ì†ë„ +10', salary: 3500, salaryDisplay: '3,500ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: 'ì •ì‚° ì‹œê°„ ë‹¨ì¶•', penaltyVal: 500, penalty: 'í‡´ì§ê¸ˆ 500ë§Œ', owner: null },
            { id:30, type: 'mng', name: 'ë¬¸ì„œ ì •ë¦¬ì˜ ì‹ ', grade: 'C', stat: 'ì •ë¦¬ +10', salary: 3000, salaryDisplay: '3,000ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: '-', penaltyVal: 500, penalty: 'í‡´ì§ê¸ˆ 500ë§Œ', owner: null },
            { id:64, type: 'mng', name: 'ì°½ê³  ì •ë¦¬ì›', grade: 'C', stat: 'ì •ë¦¬ +5', salary: 2500, salaryDisplay: '2,500ë§Œ', revenue: 500, expected: 'ğŸ’° ë§¤ì¶œ +500ë§Œ', effect: 'ì¬ê³  ì •ë¦¬', penaltyVal: 300, penalty: 'ìœ„ì•½ê¸ˆ 300ë§Œ', owner: null },
            { id:31, type: 'special', name: 'ë‚™í•˜ì‚° ê¸ˆìˆ˜ì €', grade: 'Special', stat: 'ëŠ¥ë ¥ì¹˜ 0', salary: 5000, salaryDisplay: '5,000ë§Œ', revenue: 0, expected: 'ğŸ’° íŒŒì‚° ë¶€í™œê¶Œ', effect: 'íŒŒì‚° ì‹œ 1íšŒ ë¶€í™œ', penaltyVal: 25000, penalty: 'íšŒì¥ë‹˜ì˜ ë¶„ë…¸ (2.5ì–µ)', owner: null },
            { id:32, type: 'special', name: 'ì‚°ì—… ìŠ¤íŒŒì´', grade: 'Special', stat: 'ì •ë³´ +50', salary: 6000, salaryDisplay: '6,000ë§Œ', revenue: 0, expected: 'ğŸ’° ê¸°ìˆ  íƒˆì·¨', effect: 'ê²½ìŸ íŒ€ ê¸°ìˆ ë ¥ í›”ì¹˜ê¸°', penaltyVal: 10000, penalty: 'ì†Œì†¡ ë¹„ìš© 1ì–µ', owner: null },
            { id:33, type: 'special', name: 'ì—´ì •í˜ì´ ì¸í„´', grade: 'Special', stat: 'ì—´ì • +100', salary: 0, salaryDisplay: '0ì›', revenue: 0, expected: 'ğŸ’° ê°€ì„±ë¹„ ìµœê³ ', effect: 'ë¬´ê¸‰ (3ë¼ìš´ë“œ í›„ í‡´ì‚¬)', penaltyVal: 3000, penalty: 'ë…¸ë™ì²­ ì‹ ê³  (3,000ë§Œ)', owner: null },
            { id:34, type: 'special', name: 'ì€í‡´í•œ ëŒ€ê¸°ì—… íšŒì¥', grade: 'Special', stat: 'ê²½ì˜ +50', salary: 1000, salaryDisplay: '1,000ë§Œ', revenue: 0, expected: 'ğŸ’° ê²½ì˜ ìë¬¸', effect: 'ì”ì†Œë¦¬ ì¹´ë“œ ë½‘ê¸°', penaltyVal: 10000, penalty: 'ëª…ì˜ˆ í‡´ì§ê¸ˆ 1ì–µ', owner: null },
            { id:35, type: 'special', name: 'ì‚¬ë‚´ ë°”ë¦¬ìŠ¤íƒ€', grade: 'Special', stat: 'ì¹´í˜ì¸ +30', salary: 3500, salaryDisplay: '3,500ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: 'íŒ€ì› ì²´ë ¥ íšŒë³µ', penaltyVal: 1000, penalty: 'ë¨¸ì‹  ìˆ˜ë¦¬ë¹„ 1,000ë§Œ', owner: null },
            { id:36, type: 'special', name: 'ë¶„ìœ„ê¸° ë©”ì´ì»¤', grade: 'Special', stat: 'ë‹¨í•© +30', salary: 3500, salaryDisplay: '3,500ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: 'ë‹¨í•© ë¯¸ì…˜ ë³´ë„ˆìŠ¤', penaltyVal: 1000, penalty: 'íšŒì‹ë¹„ 1,000ë§Œ', owner: null },
            { id:37, type: 'special', name: 'ë‹¤í˜ˆì§ˆ ì²œì¬', grade: 'Special', stat: 'ê¸°ìˆ  +60', salary: 6000, salaryDisplay: '6,000ë§Œ', revenue: 0, expected: 'ğŸ’° ìœ„í—˜ë¶€ë‹´ æœ‰', effect: '50% í™•ë¥ ë¡œ ì‹¸ì›€(ë¹„ìš©)', penaltyVal: 2000, penalty: 'ê¸°ë¬¼ íŒŒì†ë¹„ 2,000ë§Œ', owner: null },
            { id:38, type: 'special', name: 'ë¡œë˜ ë‹¹ì²¨ì', grade: 'Special', stat: 'í–‰ìš´ +100', salary: 5000, salaryDisplay: '5,000ë§Œ', revenue: 0, expected: 'ğŸ’° ëŒ€ë°•í™•ë¥  ì¦ê°€', effect: 'ì£¼ì‚¬ìœ„ ê²Œì„ 2ë°°', penaltyVal: 2000, penalty: 'ì§ì› ì‚¬ê¸° ì €í•˜ (2,000ë§Œ)', owner: null },
            { id:39, type: 'special', name: 'ChatGPT ê³ ìˆ˜', grade: 'Special', stat: 'ì§€ì‹ +40', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'í€´ì¦ˆ ë¯¸ì…˜ ê²€ìƒ‰ ì°¬ìŠ¤', penaltyVal: 1000, penalty: 'ê³„ì •ë¹„ 1,000ë§Œ', owner: null },
            { id:40, type: 'special', name: 'ì•¼ìƒ ìƒì¡´ ì „ë¬¸ê°€', grade: 'Special', stat: 'ìƒì¡´ +50', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ì²œì¬ì§€ë³€ í”¼í•´ ì—†ìŒ', penaltyVal: 2000, penalty: 'ìœ„ì•½ê¸ˆ 1,000ë§Œ', owner: null },
            { id:41, type: 'special', name: 'ë©€í‹°í”Œë ˆì´ì–´ ê²½ë¦¬', grade: 'C', stat: 'ë§ŒëŠ¥ +15', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ê°€ì„±ë¹„ ì¢‹ìŒ', penaltyVal: 3000, penalty: 'ì—…ë¬´ ë§ˆë¹„ (3,000ë§Œ)', owner: null },
            { id:42, type: 'special', name: 'ì•¼ê·¼ ìš”ì •', grade: 'C', stat: 'ì•¼ê°„ +20', salary: 3500, salaryDisplay: '3,500ë§Œ', revenue: 1500, expected: 'ğŸ’° ë§¤ì¶œ +1,500ë§Œ', effect: 'ë°¤ì— ëŠ¥ë ¥ 2ë°°', penaltyVal: 1000, penalty: 'ë³‘ì›ë¹„ 1,000ë§Œ', owner: null },
            { id:43, type: 'special', name: 'ì‚¬ë‚´ ì •ì¹˜ì™•', grade: 'C', stat: 'ì •ì¹˜ +50', salary: 5000, salaryDisplay: '5,000ë§Œ', revenue: 0, expected: 'ğŸ’° ìƒì¡´ê°€ì¹˜', effect: 'í•´ê³  ë¶ˆê°€', penaltyVal: 5000, penalty: 'ì†Œì†¡ ë¹„ìš© 5,000ë§Œ', owner: null },
            { id:44, type: 'special', name: 'ì•„ì´ë””ì–´ ë±…í¬', grade: 'B', stat: 'ì°½ì˜ +40', salary: 5000, salaryDisplay: '5,000ë§Œ', revenue: 2500, expected: 'ğŸ’° ë§¤ì¶œ +2,500ë§Œ', effect: 'ëŒ€ë°• ì•„ì´í…œ í™•ë¥  ì¦ê°€', penaltyVal: 2000, penalty: 'ì‹¤íŒ¨ ë¹„ìš© 2,000ë§Œ', owner: null },
            { id:45, type: 'special', name: 'ë¬¼ë¥˜ ì°½ê³ ì¥', grade: 'B', stat: 'ê´€ë¦¬ +20', salary: 4500, salaryDisplay: '4,500ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ì¬ê³  ê´€ë¦¬ ë¹„ìš© ì ˆê°', penaltyVal: 2000, penalty: 'ì¬ê³  ì†ì‹¤ 2,000ë§Œ', owner: null },
            { id:46, type: 'special', name: 'ê±´ë¬¼ì£¼ ì•„ë“¤', grade: 'B', stat: 'ë¶€ë™ì‚° +50', salary: 10000, salaryDisplay: '1ì–µ (ì§€ë¶„)', revenue: 0, expected: 'ğŸ’° ì„ëŒ€ë£Œ ì ˆê°', effect: 'ì„ëŒ€ë£Œ 50% í• ì¸', penaltyVal: 10000, penalty: 'ì„ëŒ€ë£Œ 2ë°° ì¸ìƒ', owner: null },
            { id:47, type: 'special', name: 'ìœ í–‰ì–´ ì œì¡°ê¸°', grade: 'B', stat: 'ì„¼ìŠ¤ +30', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ë§ˆì¼€íŒ… ëŒ€ë°• í™•ë¥  ì¦ê°€', penaltyVal: 1500, penalty: 'ì €ì‘ê¶Œ ë¶„ìŸ 1,500ë§Œ', owner: null },
            { id:48, type: 'special', name: 'ë¯¸ìŠë­ ì‰í”„ ì¶œì‹ ', grade: 'B', stat: 'ìš”ë¦¬ +50', salary: 5000, salaryDisplay: '5,000ë§Œ', revenue: 2500, expected: 'ğŸ’° ë§¤ì¶œ +2,500ë§Œ', effect: 'ì§ì› ìƒì‚°ì„± ì¦ê°€', penaltyVal: 2000, penalty: 'ì‹ëŒ€ 2ë°° ì¦ê°€', owner: null },
            { id:49, type: 'special', name: 'ì‹ë¬¼ í‚¤ìš°ê¸° ì¥ì¸', grade: 'C', stat: 'ê³µê¸°ì²­ì • +5', salary: 3000, salaryDisplay: '3,000ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: 'ì—…ë¬´ íš¨ìœ¨ 5% ì¦ê°€', penaltyVal: 500, penalty: 'í™”ë¶„ ì²˜ë¶„ë¹„ 500ë§Œ', owner: null },
            { id:50, type: 'special', name: 'ë°˜ë ¤ê²¬ (ë§ˆìŠ¤ì½”íŠ¸)', grade: 'Special', stat: 'ê·€ì—¬ì›€ +MAX', salary: 500, salaryDisplay: '500ë§Œ (ì‚¬ë£Œ)', revenue: 250, expected: 'ğŸ’° ë§¤ì¶œ +250ë§Œ', effect: 'ë°©ë¬¸ ê³ ê° ë§¤ì¶œ ìƒìŠ¹', penaltyVal: 500, penalty: 'ê³ ê° í•­ì˜ ì¦ê°€', owner: null },
            { id:65, type: 'special', name: 'ì‚¬ë‚´ ê°•ì‚¬', grade: 'B', stat: 'êµìœ¡ +20', salary: 4000, salaryDisplay: '4,000ë§Œ', revenue: 2000, expected: 'ğŸ’° ë§¤ì¶œ +2,000ë§Œ', effect: 'ì§ì› êµìœ¡', penaltyVal: 1500, penalty: 'ìœ„ì•½ê¸ˆ 1,500ë§Œ', owner: null },
            { id:66, type: 'special', name: 'ë³´ì•ˆ ìš”ì›', grade: 'C', stat: 'ì²´ë ¥ +10', salary: 3000, salaryDisplay: '3,000ë§Œ', revenue: 1000, expected: 'ğŸ’° ë§¤ì¶œ +1,000ë§Œ', effect: 'ì¡ìƒì¸ ì°¨ë‹¨', penaltyVal: 500, penalty: 'ìœ„ì•½ê¸ˆ 500ë§Œ', owner: null }
        ];

        const db_crisis_global = [ "ğŸ“‰ [ê²½ì œ] ê¸€ë¡œë²Œ ê¸ˆìœµ ìœ„ê¸°! (ì „ íŒ€ í˜„ê¸ˆ 10ì–µ ë°˜ë‚©) \n[ğŸ’¡ ë°©ì–´ ê°€ëŠ¥: ì›”ê°€ì˜ íˆ¬ì ê·€ì¬]", "ğŸ“‰ [ê²½ì œ] ê¸ˆë¦¬ ì¸ìƒ! (ì „ íŒ€ ë¹„ìš© +1,000ë§Œ) \n[ğŸ’¡ ë°©ì–´ ê°€ëŠ¥: ì¹¼ê°™ì€ íšŒê³„ì‚¬]", "ğŸ“‰ [ê²½ì œ] í™˜ìœ¨ í­ë½! (ì „ íŒ€ ë§¤ì¶œ -500ë§Œ) \n[ğŸ’¡ ë°©ì–´ ê°€ëŠ¥: ê¸€ë¡œë²Œ ë§ˆì¼€í„°]", "ğŸ“‰ [ì‚¬íšŒ] ë‚´ìˆ˜ ì‹œì¥ ì¶•ì†Œ (ì „ íŒ€ ë§¤ì¶œ -500ë§Œ) \n[ğŸ’¡ ë°©ì–´ ê°€ëŠ¥: ì „ì„¤ì˜ ì˜ì—…ì™•]" ];
        const db_opp_global = [ "ğŸ“ˆ [ê²½ì œ] ê²½ê¸° ë¶€ì–‘ì±…! (ë§¤ì¶œ +5,000ë§Œ) \n[ğŸ”¥ ë¶€ìŠ¤íŠ¸: ì „ì„¤ì˜ ì˜ì—…ì™•]", "ğŸ“ˆ [ê²½ì œ] ê¸ˆë¦¬ ì¸í•˜ (ë¹„ìš© -1,000ë§Œ) \n[ğŸ”¥ ë¶€ìŠ¤íŠ¸: ì›”ê°€ì˜ íˆ¬ì ê·€ì¬]" ];
        const db_mission = [ "âš¡ ì„ ìƒë‹˜ê³¼ ê°€ìœ„ë°”ìœ„ë³´ ìŠ¹ë¦¬ (+500ë§Œ)", "âš¡ 'í™”ì´íŒ…' ì„ ì°½ íŒ€ (+300ë§Œ)" ];


        // *** 2. í•¨ìˆ˜ ì •ì˜ ***

        // DOMContentLoadedë¥¼ ì‚¬ìš©í•˜ì—¬ DOM ë¡œë”© í›„ ì´ˆê¸°í™”
        window.addEventListener('DOMContentLoaded', function() {
            // ì¸íŠ¸ë¡œ ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => { document.getElementById('line1-1').style.opacity = 1; document.getElementById('line1-1').style.transform = 'translateY(0)'; }, 500);
            setTimeout(() => { document.getElementById('line1-2').style.opacity = 1; document.getElementById('line1-2').style.transform = 'translateY(0)'; }, 1500);
            setTimeout(() => { document.getElementById('line1-3').style.opacity = 1; document.getElementById('line1-3').style.transform = 'translateY(0)'; }, 2500);
            setTimeout(() => { 
                const btn = document.getElementById('enterBtn1');
                if(btn) { btn.style.opacity = 1; btn.style.animation = "pulse 2s infinite"; }
            }, 3500);
            
            // ë°ì´í„° ì´ˆê¸°í™”
            personnelData.forEach(p => { p.initialRevenue = p.revenue; p.hiredRound = null; });
            
            // ë Œë”ë§ í˜¸ì¶œ
            renderTeamCards();
            updateAllTeamSelects();
            renderPersonnelCards(currentFilter); // ì´ˆê¸° ë Œë”ë§ ì¶”ê°€
        });

        function goToIntro() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('introPage').style.display = 'flex';
        }
        function showBrandingPage() { document.getElementById('introPage').style.display = 'none'; document.getElementById('brandingPage').style.display = 'flex'; }
        function startGameDashboard() { document.getElementById('brandingPage').style.display = 'none'; document.getElementById('gamePage').style.display = 'block'; calculate(); }
        function togglePersonnelPage() {
            const gamePage = document.getElementById('gamePage'); const hrPage = document.getElementById('personnelPage');
            if (gamePage.style.display === 'none') { 
                gamePage.style.display = 'block'; hrPage.style.display = 'none'; calculate(); 
            } else { 
                gamePage.style.display = 'none'; hrPage.style.display = 'block'; renderPersonnelCards(currentFilter); 
            }
        }

        // ì¡° ê´€ë¦¬
        function addTeam() {
            const newId = teams.length + 1;
            const colors = ['#e74c3c', '#f1c40f', '#1abc9c', '#34495e', '#95a5a6'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            teams.push({ id: newId, name: `${newId}ì¡°`, color: randomColor, logo: null, valueUps: [], welfares: [], baseCost: 0 });
            teamLoans[newId] = [];
            renderTeamCards(); updateAllTeamSelects();
        }
        function removeTeam() {
            if(teams.length <= 1) return;
            teams.pop();
            renderTeamCards(); updateAllTeamSelects();
        }
        function updateTeamName(id, newName) {
            const team = teams.find(t => t.id == id);
            if (team) { team.name = newName; updateAllTeamSelects(); }
        }
        function uploadLogo(id, inputElement) {
            if (inputElement.files && inputElement.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const team = teams.find(t => t.id == id);
                    if(team) {
                        team.logo = e.target.result;
                        const img = document.getElementById(`teamLogoImg_${id}`);
                        const ph = document.getElementById(`teamLogoPlace_${id}`);
                        if(img) { img.src = e.target.result; img.style.display = 'block'; }
                        if(ph) ph.style.display = 'none';
                    }
                }
                reader.readAsDataURL(inputElement.files[0]);
            }
        }
        function updateAllTeamSelects() {
            const options = `<option value="all">ëª¨ë“  ì¡°</option>` + teams.map(t => `<option value="${t.id}">${t.name}</option>`).join('');
            document.querySelectorAll('.team-select-all').forEach(sel => {
                const currentVal = sel.value;
                sel.innerHTML = options;
                sel.value = currentVal || 'all'; 
            });
            const personnelPage = document.getElementById('personnelPage');
            if(personnelPage && personnelPage.style.display === 'block') {
               const searchVal = document.getElementById('searchInput').value;
               renderPersonnelCards(currentFilter, searchVal);
            }
        }

        // ëª¨ë‹¬ ë° ìƒì 
        function showMainMission() {
            const content = mainMissions[round] || "í˜„ì¬ ë¼ìš´ë“œì— ë°°ì •ëœ ë¯¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.";
            document.getElementById('modalTitle').innerText = `ğŸ† ${round}ë…„ì°¨ ë©”ì¸ ë¯¸ì…˜`;
            document.getElementById('modalBody').innerText = content;
            document.getElementById('modalAdminControls').style.display = 'flex';
            document.getElementById('shopGrid').style.display = 'none';
            document.getElementById('missionModal').style.display = 'flex';
        }
        function closeModal() { document.getElementById('missionModal').style.display = 'none'; }
        
        // [ìˆ˜ì •3] ìƒì  UIì— íŒŒë€ìƒ‰ ë§¤ì¶œ ì„±ì¥ë¥  í‘œì‹œ ì¶”ê°€
        function openShop(teamId, type) {
            const team = teams.find(t => t.id == teamId);
            document.getElementById('modalTitle').innerText = (type === 'valueup') ? `ğŸš€ ${team.name} ê¸°ì—… VALUE-UP` : `ğŸ€ ${team.name} ê¸°ì—… ë³µì§€`;
            document.getElementById('modalBody').innerText = "ì›í•˜ëŠ” í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.";
            document.getElementById('modalAdminControls').style.display = 'none';
            const grid = document.getElementById('shopGrid');
            grid.innerHTML = '';
            grid.style.display = 'grid';
            const items = (type === 'valueup') ? valueUpItems : welfareItems;
            items.forEach(item => {
                let costText = "";
                if(item.maintenance) costText = `ìœ ì§€ë¹„: ${item.maintenance}ë§Œ`;
                else if(item.type === 'recurring') costText = `ë¹„ìš©: ${item.desc}`;
                else if(item.cost) costText = `ë¹„ìš©: ${item.cost}ë§Œ`;
                let effectText = "";
                if(item.value) effectText = `ê¸°ì—…ê°€ì¹˜ +${item.value}`;
                // ë§¤ì¶œ ì„±ì¥ë¥  í‘œì‹œ ë¡œì§
                let growthText = "";
                if(item.growthRate) growthText = `<div style="color:var(--blue-color); font-weight:bold; margin-top:3px;">ë§¤ì¶œ ì„±ì¥ +${(item.growthRate*100)}%</div>`;
                
                let initialCostText = item.cost && item.maintenance ? `ì´ˆê¸°ë¹„ìš©: ${item.cost}ë§Œ / ` : "";
                
                grid.innerHTML += `
                    <div class="shop-item" onclick="buyItem(${teamId}, '${type}', '${item.id}')">
                        <div class="shop-item-name">${item.name}</div>
                        <div class="shop-item-cost">${initialCostText}${costText}</div>
                        <div class="shop-item-effect">${effectText}</div>
                        ${growthText}
                    </div>`;
            });
            document.getElementById('missionModal').style.display = 'flex';
        }
        function buyItem(teamId, type, itemId) {
            const team = teams.find(t => t.id == teamId);
            let item, list;
            if (type === 'valueup') { item = valueUpItems.find(i => i.id == itemId); list = team.valueUps; } 
            else { item = welfareItems.find(i => i.id == itemId); list = team.welfares; }
            if(list.find(i => i.id == itemId)) { alert("ì´ë¯¸ ë³´ìœ  ì¤‘ì…ë‹ˆë‹¤."); return; }
            if (item.cost) {
                const capInput = document.getElementById(`t${teamId}_cap`);
                let currentCap = parseInt(capInput.value) || 0;
                if (currentCap < item.cost) { alert(`ìë³¸ê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. (í•„ìš”: ${item.cost}ë§Œ)`); return; }
                if(confirm(`${item.name}ì„(ë¥¼) êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në¹„ìš© ${item.cost}ë§Œì›ì´ ì°¨ê°ë©ë‹ˆë‹¤.`)) {
                    capInput.value = currentCap - item.cost;
                    list.push(item);
                } else return;
            } else {
                if(!confirm(`${item.name}ì„(ë¥¼) ì ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
                list.push(item);
            }
            calculate();
            closeModal(); renderTeamCards();
        }
        function removeItem(teamId, type, itemId) {
            if(!confirm("í•´ë‹¹ í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? íš¨ê³¼ê°€ ì¦‰ì‹œ ì‚¬ë¼ì§‘ë‹ˆë‹¤.")) return;
            const team = teams.find(t => t.id == teamId);
            if (type === 'valueup') team.valueUps = team.valueUps.filter(i => i.id !== itemId);
            else team.welfares = team.welfares.filter(i => i.id !== itemId);
            calculate();
            renderTeamCards();
        }

        // ë Œë”ë§
        function renderTeamCards() {
            const grid = document.getElementById('dashboardGrid');
            if(!grid) return; 
            
            let backup = {};
            teams.forEach(t => {
                if(document.getElementById(`t${t.id}_cap`)) {
                    backup[t.id] = {
                        cap: document.getElementById(`t${t.id}_cap`).value,
                        rev: document.getElementById(`t${t.id}_rev`).value
                    };
                }
            });
            grid.innerHTML = '';
            if(teams.length <= 2) grid.style.gridTemplateColumns = "repeat(2, 1fr)";
            else if(teams.length === 3) grid.style.gridTemplateColumns = "repeat(3, 1fr)";
            else grid.style.gridTemplateColumns = "repeat(4, 1fr)"; 

            teams.forEach(t => {
                const cap = backup[t.id] ? backup[t.id].cap : 5000;
                const rev = backup[t.id] ? backup[t.id].rev : 0;
                const hasLogo = t.logo !== null;
                const logoDisplay = hasLogo ? 'block' : 'none';
                const placeDisplay = hasLogo ? 'none' : 'flex';

                let valueUpTags = t.valueUps.map(i => `<div class="item-tag"><span>${i.name}</span><span class="item-delete" onclick="removeItem(${t.id}, 'valueup', '${i.id}')">&times;</span></div>`).join('');
                if(valueUpTags === '') valueUpTags = '<div class="empty-message">ì—†ìŒ</div>';

                let welfareTags = t.welfares.map(i => `<div class="item-tag"><span>${i.name}</span><span class="item-delete" onclick="removeItem(${t.id}, 'welfare', '${i.id}')">&times;</span></div>`).join('');
                if(welfareTags === '') welfareTags = '<div class="empty-message">ì—†ìŒ</div>';

                // [ìˆ˜ì •2] ë§¤ì¶œ ì…ë ¥ì°½ ì˜†ì— ì„±ê³¼ê¸ˆ íš¨ê³¼ í‘œì‹œìš© span ì¶”ê°€
                grid.innerHTML += `
                <div class="team-card" id="team${t.id}-card" style="border-top: 5px solid ${t.color};">
                    <div class="team-header">
                        <div class="logo-wrapper" onclick="document.getElementById('logoInput_${t.id}').click()">
                            <img id="teamLogoImg_${t.id}" src="${t.logo || ''}" class="team-logo" style="display:${logoDisplay}">
                            <div id="teamLogoPlace_${t.id}" class="logo-placeholder" style="display:${placeDisplay}">
                                <i class="fas fa-camera"></i>
                                <span>ë¡œê³  ì—…ë¡œë“œ</span>
                            </div>
                            <input type="file" id="logoInput_${t.id}" style="display:none" accept="image/*" onchange="uploadLogo(${t.id}, this)">
                        </div>
                        <input type="text" class="team-name" value="${t.name}" oninput="updateTeamName(${t.id}, this.value)">
                    </div>
                    <div class="input-row"><span>ê¸°ì´ˆìë³¸(ë§Œ)</span><input type="number" id="t${t.id}_cap" class="num-input" value="${cap}" oninput="calculate()"></div>
                    <div class="input-row value-row"><span>ğŸ’ ê¸°ì—…ê°€ì¹˜(ì ìˆ˜)</span><input type="number" id="t${t.id}_value" class="num-input readonly-input" value="0" readonly></div>
                    <div class="loan-area">
                        <div class="loan-info"><span>ê°€ëŠ¥ì•¡: <span id="t${t.id}_loanLimit">0</span>ë§Œ</span></div>
                        <button class="btn-loan" onclick="requestLoan(${t.id})">ğŸ’° ëŒ€ì¶œ ì‹ ì²­</button>
                        <div class="loan-status" id="t${t.id}_loanStatus"></div>
                    </div>
                    <div class="input-row">
                        <span>(+)ë§¤ì¶œ</span>
                        <div style="display:flex; align-items:center;">
                            <input type="number" id="t${t.id}_rev" class="num-input" value="${rev}" style="color:#2980b9" oninput="calculate()">
                            <span id="t${t.id}_rev_bonus" style="font-size:0.75rem; color:var(--green-color); margin-left:5px; white-space:nowrap; font-weight:bold;"></span>
                        </div>
                    </div>
                    <div class="input-row"><span>(-)ë¹„ìš©</span><input type="number" id="t${t.id}_cost" class="num-input" value="0" style="color:#c0392b" onchange="handleCostManualChange(${t.id}, this.value)"></div>
                    <div class="input-row"><span>(-)ì´ì</span><input type="number" id="t${t.id}_interest" class="num-input readonly-input" value="0" readonly></div>
                    <div class="input-row"><span>(-)ì„¸ê¸ˆ(10%)</span><input type="number" id="t${t.id}_tax" class="num-input tax-input" value="0" readonly></div>
                    <div class="total-money" id="t${t.id}_total">0 ì›</div>
                    <div class="bar-bg"><div id="t${t.id}_bar" class="bar-fill" style="background:${t.color};"></div></div>
                    <div class="section-container">
                        <div class="section-title">ğŸ‘‘ ë³´ìœ  ì¸ì¬ <span id="t${t.id}_cardCount" class="card-count">(ì˜ì…: 0)</span></div>
                        <div id="t${t.id}-hires"></div>
                    </div>
                    <div class="section-container">
                        <div class="section-title">ğŸš€ ê¸°ì—… VALUE-UP <button class="btn-add-item" onclick="openShop(${t.id}, 'valueup')">+</button></div>
                        <div id="t${t.id}-valueup">${valueUpTags}</div>
                    </div>
                    <div class="section-container">
                        <div class="section-title">ğŸ€ ê¸°ì—… ë³µì§€ <button class="btn-add-item" onclick="openShop(${t.id}, 'welfare')">+</button></div>
                        <div id="t${t.id}-welfare">${welfareTags}</div>
                    </div>
                </div>`;
            });
            updateDashboardHires(); calculate(); 
        }

        function handleCostManualChange(teamId, newValue) {
            const team = teams.find(t => t.id == teamId);
            let salarySum = 0;
            personnelData.forEach(p => { if(p.owner == teamId) salarySum += p.salary; });
            
            let dynamicCost = 0;
            team.valueUps.forEach(v => { if(v.maintenance) dynamicCost += v.maintenance; });
            team.welfares.forEach(w => { 
                if(w.type === 'recurring') {
                    dynamicCost += Math.floor((salarySum / 12) * w.costRate); 
                }
            });
            
            team.baseCost = parseInt(newValue) - dynamicCost;
            calculate();
        }

        function calculate() {
            teams.forEach(t => {
                if(!document.getElementById(`t${t.id}_cap`)) return;
                const c = Number(document.getElementById(`t${t.id}_cap`).value)||0;
                let r = Number(document.getElementById(`t${t.id}_rev`).value)||0; 
                
                let salarySum = 0;
                personnelData.forEach(p => {
                    if(p.owner == t.id) salarySum += p.salary;
                });

                let valueUpMaintenance = 0; 
                let valueUpScore = 0;
                t.valueUps.forEach(v => {
                    if(v.maintenance) valueUpMaintenance += v.maintenance;
                    if(v.value) valueUpScore += v.value;
                });

                let welfareCost = 0; 
                let revenueMultiplier = 1.0; 
                let welfareScore = 0; 
                t.welfares.forEach(w => {
                    if(w.type === 'recurring') {
                        welfareCost += Math.floor((salarySum / 12) * w.costRate);
                        revenueMultiplier += w.growthRate; 
                    }
                    if(w.value) welfareScore += w.value; 
                });

                let totalDisplayCost = t.baseCost + valueUpMaintenance + welfareCost;
                document.getElementById(`t${t.id}_cost`).value = totalDisplayCost;

                // [ìˆ˜ì •2] ìµœì¢… ë§¤ì¶œ ê³„ì‚° ë° ì‹¤ì‹œê°„ ë°˜ì˜ í‘œì‹œ
                let finalRevenue = Math.floor(r * revenueMultiplier);
                let bonusRevenue = finalRevenue - r;
                
                // ë³´ë„ˆìŠ¤ ê¸ˆì•¡ í‘œì‹œ ì—…ë°ì´íŠ¸
                const bonusSpan = document.getElementById(`t${t.id}_rev_bonus`);
                if(bonusRevenue > 0) {
                    bonusSpan.innerText = `(+ì„±ê³¼ê¸ˆ: ${bonusRevenue}ë§Œ)`;
                } else {
                    bonusSpan.innerText = "";
                }
                
                const loanInterestInput = document.getElementById(`t${t.id}_interest`);
                let interest = 0;
                if(teamLoans[t.id]) teamLoans[t.id].forEach(l => { interest += Math.floor(l.amount * 0.1); });
                loanInterestInput.value = interest;
                const tax = Math.floor(finalRevenue * 0.1);
                document.getElementById(`t${t.id}_tax`).value = tax;
                
                const tot = c + finalRevenue - totalDisplayCost - interest - tax;
                document.getElementById(`t${t.id}_total`).innerText = formatCurrency(tot);
                document.getElementById(`t${t.id}_bar`).style.width = Math.min((tot/10000)*100, 100) + "%";
                
                let personnelScore = 0;
                personnelData.forEach(p => {
                    if(p.owner == t.id) {
                        if(p.grade === 'S') personnelScore += 100;
                        else if(p.grade === 'A') personnelScore += 70;
                        else if(p.grade === 'B') personnelScore += 50;
                        else if(p.grade === 'C') personnelScore += 20;
                    }
                });
                const assetScore = Math.floor(tot / 100); 
                const finalValue = assetScore + personnelScore + valueUpScore + welfareScore;
                document.getElementById(`t${t.id}_value`).value = finalValue;
                updateLoanStatus(t.id);
                let maxSlots = 1;
                if(tot >= 20000) maxSlots = Math.floor(tot / 10000);
                const currentHiredCount = personnelData.filter(p => p.owner == t.id).length;
                const remaining = Math.max(0, maxSlots - currentHiredCount);
                document.getElementById(`t${t.id}_cardCount`).innerText = `(ì˜ì…: ${remaining})`;
            });
        }

        function updateDashboardHires() {
            teams.forEach(t => { 
                const targetDiv = document.getElementById(`t${t.id}-hires`);
                if(targetDiv) targetDiv.innerHTML = ''; 
            });
            personnelData.forEach(p => {
                if(p.owner !== null) {
                    const tenure = round - p.hiredRound + 1;
                    const targetDiv = document.getElementById(`t${p.owner}-hires`);
                    let badgeColor = "";
                    if(p.grade === 'S') badgeColor = "#d4af37"; else if(p.grade === 'A') badgeColor = "#c0392b"; else if(p.grade === 'B') badgeColor = "#2980b9"; else if(p.grade === 'C') badgeColor = "#7f8c8d"; else badgeColor = "#8e44ad";
                    if(targetDiv) {
                        targetDiv.innerHTML += `
                            <div class="hired-item">
                                <div class="hired-info">
                                    <div class="hired-name-row">
                                        <span><span style="color:${badgeColor}; font-weight:900;">[${p.grade}]</span> ${p.name} <span class="hired-salary-tag">(ë¹„ìš©: ${p.salaryDisplay})</span></span>
                                        <span class="hired-tenure">${tenure}ë…„ì°¨</span>
                                    </div>
                                    <span class="hired-expected">í˜„ì¬ ë§¤ì¶œ: +${(p.revenue / 10000).toFixed(1)}ì–µ</span>
                                    <span class="hired-effect">${p.effect}</span>
                                </div>
                                <button class="btn-fire" onclick="firePersonnel(${p.id})">í‡´ì‚¬</button>
                            </div>`;
                    }
                }
            });
        }

        function applyEffectLogic(teamSelectId, amountId, typeId) {
            const teamVal = document.getElementById(teamSelectId).value;
            const amount = parseInt(document.getElementById(amountId).value);
            const type = document.getElementById(typeId).value;
            if (!amount || isNaN(amount)) { alert("ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”."); return; }
            const targetTeams = teamVal === 'all' ? teams : teams.filter(t => t.id == teamVal);
            targetTeams.forEach(t => {
                if (type === 'rev') {
                    const el = document.getElementById(`t${t.id}_rev`);
                    el.value = parseInt(el.value) + amount;
                } else if (type === 'cost') {
                    t.baseCost += amount;
                } else if (type === 'cap_plus') {
                    const el = document.getElementById(`t${t.id}_cap`);
                    el.value = parseInt(el.value) + amount;
                } else if (type === 'cap_minus') {
                    const el = document.getElementById(`t${t.id}_cap`);
                    el.value = parseInt(el.value) - amount;
                }
            });
            calculate(); alert("ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
        function applyManualEffect() { applyEffectLogic('manualTeamSelect', 'manualAmount', 'manualType'); }
        function applyModalEffect() { applyEffectLogic('modalTeamSelect', 'modalAmount', 'modalType'); }

        function requestLoan(teamId) {
            const ev = parseInt(document.getElementById(`t${teamId}_value`).value) || 0;
            const limit = ev * 100; 
            if (limit <= 0) { alert("ê¸°ì—…ê°€ì¹˜ê°€ ì—†ì–´ ëŒ€ì¶œ ë¶ˆê°€"); return; }
            const amountStr = prompt(`ëŒ€ì¶œ ê°€ëŠ¥: ${limit.toLocaleString()}ë§Œì›\nê¸ˆì•¡ ì…ë ¥ (ë§Œì›):`);
            if (!amountStr) return;
            const amount = parseInt(amountStr);
            if (isNaN(amount) || amount <= 0) return;
            if (amount > limit) { alert("í•œë„ ì´ˆê³¼"); return; }
            const capInput = document.getElementById(`t${teamId}_cap`);
            capInput.value = parseInt(capInput.value) + amount;
            teamLoans[teamId].push({ amount: amount, startRound: round, repayRound: round + 2 });
            updateLoanStatus(teamId); calculate();
        }
        function updateLoanStatus(teamId) {
            const statusDiv = document.getElementById(`t${teamId}_loanStatus`);
            const limitDiv = document.getElementById(`t${teamId}_loanLimit`);
            const ev = parseInt(document.getElementById(`t${teamId}_value`).value) || 0;
            limitDiv.innerText = (ev * 100).toLocaleString();
            const loans = teamLoans[teamId];
            if (!loans || loans.length === 0) { statusDiv.innerText = ""; return; }
            let totalLoan = 0; let msg = "";
            loans.forEach(l => { totalLoan += l.amount; msg += `${l.repayRound}R ìƒí™˜: ${l.amount}ë§Œ\n`; });
            statusDiv.innerText = `ì´ ëŒ€ì¶œ: ${totalLoan}ë§Œ\n` + msg;
        }
        function pickRandomNews() {
            let list = Math.random() < 0.5 ? db_crisis_global : db_opp_global;
            let type = list === db_crisis_global ? 'crisis' : 'opportunity';
            const content = list[Math.floor(Math.random() * list.length)];
            const box = document.getElementById('newsBox'), text = document.getElementById('newsText'), badge = document.getElementById('scopeBadge');
            badge.style.display = 'inline-block'; badge.innerText = 'ë‰´ìŠ¤ ì†ë³´'; text.innerText = content;
            if(type === 'crisis') { box.className = "news-box blink-red"; badge.style.background = "#c0392b"; text.style.color = "#c0392b"; }
            else { box.className = "news-box blink-blue"; badge.style.background = "#2980b9"; text.style.color = "#2980b9"; }
        }
        function pickMission() {
             const content = db_mission[Math.floor(Math.random() * db_mission.length)];
             document.getElementById('modalTitle').innerText = "âš¡ ëŒë°œ ë¯¸ì…˜";
             document.getElementById('modalBody').innerText = content;
             document.getElementById('modalAdminControls').style.display = 'flex';
             document.getElementById('shopGrid').style.display = 'none';
             document.getElementById('missionModal').style.display = 'flex';
        }
        
        let timer = null, daysLeft = 365;
        function updateTimerDisplay() { document.getElementById('timerDisplay').innerText = daysLeft + "ì¼"; }
        function timerStart() { if(timer) return; timer = setInterval(() => { if(daysLeft > 0) { daysLeft--; updateTimerDisplay(); } else { timerStop(); alert("1ë…„ ì¢…ë£Œ!"); } }, 3500); }
        function timerStop() { clearInterval(timer); timer = null; }
        function timerReset() { timerStop(); daysLeft = 365; updateTimerDisplay(); }
        function formatCurrency(v) {
            const s = v < 0 ? "-" : "", a = Math.abs(v);
            if(a < 10000) return s + a.toLocaleString() + " ë§Œì›";
            const u = Math.floor(a/10000), m = a%10000;
            return s + u + "ì–µ " + (m? m.toLocaleString()+"ë§Œì›" : "ì›");
        }

        // ì¸ì¬ì˜ì…ì†Œ ë Œë”ë§
        function renderPersonnelCards(filterType, searchQuery = "") {
            if(filterType) currentFilter = filterType;
            const grid = document.getElementById('cardGrid');
            if(!grid) return; 
            grid.innerHTML = ''; 

            const filteredData = personnelData.filter(item => {
                const typeMatch = currentFilter === 'all' || item.type === currentFilter;
                const searchMatch = item.name.includes(searchQuery);
                return typeMatch && searchMatch;
            });
            const teamOptions = teams.map(t => `<option value="${t.id}">${t.name}</option>`).join('');

            filteredData.forEach(p => {
                let bgClass = '';
                if(p.grade === 'S') bgClass = 'bg-S'; else if(p.grade === 'A') bgClass = 'bg-A'; else if(p.grade === 'B') bgClass = 'bg-B'; else if(p.grade === 'C') bgClass = 'bg-C'; else bgClass = 'bg-Special';

                const isSoldOut = p.owner !== null;
                let isLocked = false;
                if (!isSoldOut) {
                    if (round === 1 && (p.grade === 'S' || p.grade === 'A' || p.grade === 'Special')) isLocked = true;
                    else if (round === 2 && p.grade === 'S') isLocked = true;
                }
                const soldOutClass = isSoldOut ? 'sold-out' : '';
                const lockedClass = isLocked ? 'locked' : '';
                let overlayHTML = '';
                if (isSoldOut) overlayHTML = `<div class="sold-out-overlay"></div>`;
                else if (isLocked) overlayHTML = `<div class="overlay"><i class="fas fa-lock"></i><span>${p.grade}ê¸‰ ì ê¸ˆ</span></div>`;
                
                let hiringCost = 0;
                if (p.grade === 'S') hiringCost = 2000; else if (p.grade === 'A') hiringCost = 1000; else if (p.grade === 'B') hiringCost = 500;
                
                const controlsHTML = (isSoldOut || isLocked) ? '' : `
                    <div class="hire-controls">
                        <select id="teamSelect_${p.id}" class="team-select">${teamOptions}</select>
                        <button class="btn-hire-action" onclick="hirePersonnel(${p.id})">ì˜ì… (${hiringCost > 0 ? hiringCost + 'ë§Œ' : 'ë¬´ë£Œ'})</button>
                    </div>`;

                grid.innerHTML += `
                    <div class="person-card grade-${p.grade} ${soldOutClass} ${lockedClass}">
                        ${overlayHTML}
                        <div class="pc-header ${bgClass}"><span>${p.name}</span> <span>${p.grade}ê¸‰</span></div>
                        <div class="pc-body">
                            <div class="pc-stat"><i class="fas fa-bolt"></i> ${p.stat}</div>
                            <div class="pc-salary">ì—°ë´‰: ${p.salaryDisplay}</div>
                            <div class="pc-expected">${p.expected}</div>
                            <div class="pc-effect">${p.effect}</div>
                            <div class="pc-penalty">âš ï¸ ${p.penalty}</div>
                        </div>
                        ${controlsHTML}
                    </div>`;
            });
        }
        function filterPersonnel(type, btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const searchVal = document.getElementById('searchInput').value;
            renderPersonnelCards(type, searchVal);
        }
        function searchPersonnel() {
            const searchVal = document.getElementById('searchInput').value;
            renderPersonnelCards(currentFilter, searchVal);
        }
        function hirePersonnel(personId) {
            const teamId = document.getElementById(`teamSelect_${personId}`).value;
            const person = personnelData.find(p => p.id === personId);
            const team = teams.find(t => t.id == teamId);
            const teamName = team.name;

            if(person) {
                const capInput = document.getElementById(`t${teamId}_cap`);
                const currentCap = parseInt(capInput.value) || 0;
                const rev = parseInt(document.getElementById(`t${teamId}_rev`).value)||0;
                const interest = parseInt(document.getElementById(`t${teamId}_interest`).value)||0;
                const currentCostVal = parseInt(document.getElementById(`t${teamId}_cost`).value)||0;
                const totalAsset = currentCap + rev - currentCostVal - interest;
                
                let maxSlots = 1;
                if (totalAsset >= 20000) maxSlots = Math.floor(totalAsset / 10000); 
                const currentHiredCount = personnelData.filter(p => p.owner == teamId).length;
                if (currentHiredCount >= maxSlots) { alert(`[ì˜ì… ë¶ˆê°€] ì˜ì… ì¹´ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.\ní˜„ì¬: ${currentHiredCount}ëª… / ìµœëŒ€: ${maxSlots}ëª…`); return; }
                
                let hiringCost = 0;
                if (person.grade === 'S') hiringCost = 2000; else if (person.grade === 'A') hiringCost = 1000; else if (person.grade === 'B') hiringCost = 500;
                if (currentCap < hiringCost) { alert(`[ì˜ì… ì‹¤íŒ¨] ê¸°ì´ˆìë³¸ ë¶€ì¡± (í•„ìš”: ${hiringCost}ë§Œì›)`); return; }
                
                if(confirm(`${person.name}ì„(ë¥¼) ${teamName}ë¡œ ì˜ì…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    capInput.value = currentCap - hiringCost; 
                    person.owner = teamId;
                    person.hiredRound = round; 
                    person.revenue = person.initialRevenue; 
                    
                    team.baseCost += parseInt(person.salary);

                    const revInput = document.getElementById(`t${teamId}_rev`);
                    revInput.value = parseInt(revInput.value) + parseInt(person.revenue);
                    const searchVal = document.getElementById('searchInput').value;
                    renderPersonnelCards(currentFilter, searchVal); updateDashboardHires(); calculate(); 
                    alert("ì˜ì… ì™„ë£Œ!");
                }
            }
        }
        function firePersonnel(personId) {
            const person = personnelData.find(p => p.id === personId);
            if(person) {
                if(confirm(`[ê²½ê³ ] ${person.name}ì„(ë¥¼) í‡´ì‚¬ì‹œí‚¤ê² ìŠµë‹ˆê¹Œ?`)) {
                    const teamId = person.owner;
                    const team = teams.find(t => t.id == teamId);
                    person.owner = null; 
                    person.hiredRound = null;
                    
                    team.baseCost -= parseInt(person.salary);
                    team.baseCost += parseInt(person.penaltyVal);
                    if(team.baseCost < 0) team.baseCost = 0;

                    const revInput = document.getElementById(`t${teamId}_rev`);
                    revInput.value = Math.max(0, parseInt(revInput.value) - parseInt(person.revenue));
                    updateDashboardHires(); 
                    const searchVal = document.getElementById('searchInput').value;
                    renderPersonnelCards(currentFilter, searchVal); calculate(); 
                    alert("í‡´ì‚¬ ì²˜ë¦¬ ì™„ë£Œ");
                }
            }
        }
        function nextRound() {
            if(!confirm("ì—°ë§ ê²°ì‚°ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
            teams.forEach(t => {
                if(!document.getElementById(`t${t.id}_cap`)) return;
                let cap = Number(document.getElementById(`t${t.id}_cap`).value)||0;
                let r = Number(document.getElementById(`t${t.id}_rev`).value)||0;
                
                let salarySum = 0;
                personnelData.forEach(p => { if(p.owner == t.id) salarySum += p.salary; });
                
                let revenueMultiplier = 1.0;
                t.welfares.forEach(w => { if(w.type === 'recurring') revenueMultiplier += w.growthRate; });
                let finalRevenue = Math.floor(r * revenueMultiplier);

                let cost = Number(document.getElementById(`t${t.id}_cost`).value)||0;
                const interest = Number(document.getElementById(`t${t.id}_interest`).value)||0;
                const tax = Number(document.getElementById(`t${t.id}_tax`).value)||0;
                
                let principalRepay = 0;
                const loans = teamLoans[t.id];
                if(loans) {
                    for (let i = loans.length - 1; i >= 0; i--) {
                        if (loans[i].repayRound === round + 1) {
                            principalRepay += loans[i].amount;
                            loans.splice(i, 1); 
                        }
                    }
                }
                let finalCap = cap + finalRevenue - cost - interest - tax - principalRepay;
                if (principalRepay > 0) alert(`${t.name} ëŒ€ì¶œ ì›ê¸ˆ ${principalRepay}ë§Œì› ìƒí™˜`);
                document.getElementById(`t${t.id}_cap`).value = finalCap;
                
                personnelData.forEach(p => {
                    if(p.owner == t.id) {
                        p.salary = Math.floor(p.salary * 1.1); 
                        p.salaryDisplay = p.salary >= 10000 ? (p.salary/10000).toFixed(1) + 'ì–µ' : p.salary.toLocaleString() + 'ë§Œ';
                    }
                });

                let salaryTotal = 0;
                personnelData.forEach(p => { if(p.owner == t.id) salaryTotal += p.salary; });
                t.baseCost = salaryTotal;
                
                document.getElementById(`t${t.id}_rev`).value = 0;
                document.getElementById(`t${t.id}_tax`).value = 0;
            });
            year++; round++; 
            document.getElementById('yearDisplay').innerText = year; 
            let roundText = round + " ë¼ìš´ë“œ";
            if(round === 1) roundText += " (B/Cê¸‰ ê°€ëŠ¥)"; else if(round === 2) roundText += " (Aê¸‰/Special í•´ê¸ˆ)"; else roundText += " (ì „ ë“±ê¸‰ í•´ê¸ˆ)";
            document.getElementById('roundDisplay').innerText = roundText;
            
            personnelData.forEach(p => {
                if(p.owner !== null && p.hiredRound !== null) {
                    const teamId = p.owner;
                    if(teams.find(t => t.id == teamId)) {
                        const tenure = round - p.hiredRound + 1;
                        const newRevenue = p.initialRevenue * tenure;
                        p.revenue = newRevenue;
                        const revInput = document.getElementById(`t${teamId}_rev`);
                        revInput.value = parseInt(revInput.value) + newRevenue;
                    }
                }
            });
            timerReset(); calculate(); updateDashboardHires();
            if(document.getElementById('personnelPage').style.display === 'block') {
                const searchVal = document.getElementById('searchInput').value;
                renderPersonnelCards(currentFilter, searchVal);
            }
            alert(`${year}ë…„ ì‹œì‘! (ë¬¼ê°€ìƒìŠ¹: ëª¨ë“  ì§ì› ì—°ë´‰ 10% ì¸ìƒë¨)`);
        }

        // [ê¹ƒí—ˆë¸Œ HTMLì˜ <script> ì•ˆì— ì¶”ê°€í•  ì½”ë“œ]

// 1. êµ¬ê¸€ ì•±ìŠ¤ìŠ¤í¬ë¦½íŠ¸ ë°°í¬ URL (ìì‹ ì˜ ê²ƒìœ¼ë¡œ êµì²´ í•„ìˆ˜!)
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/ì•„ì´ë””_ì…ë ¥/exec"; 

// 2. ì—°ë§ ì •ì‚° ë°ì´í„° ì €ì¥ í•¨ìˆ˜
function saveYearEndData(userCode, gameData) {
  // JSONP ìš”ì²­ì„ ìœ„í•œ ë™ì  ìŠ¤í¬ë¦½íŠ¸ ìƒì„± (CORS í•´ê²°ì±…)
  const script = document.createElement('script');
  const callbackName = 'callback_' + Date.now(); // ìœ ë‹ˆí¬í•œ ì½œë°± ì´ë¦„ ìƒì„±
  
  // ì‘ë‹µ ì²˜ë¦¬ í•¨ìˆ˜ (ì €ì¥ ì„±ê³µ ì‹œ ì‹¤í–‰ë¨)
  window[callbackName] = function(response) {
    if (response.result === 'success') {
      alert("âœ… ì—°ë§ ì •ì‚° ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    } else {
      alert("âŒ ì €ì¥ ì‹¤íŒ¨: " + response.message);
    }
    // ë’·ì •ë¦¬ (ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ì™€ í•¨ìˆ˜ ì‚­ì œ)
    document.body.removeChild(script);
    delete window[callbackName];
  };

  // ë°ì´í„° ì¸ì½”ë”©
  const encodedData = encodeURIComponent(JSON.stringify(gameData));
  
  // [í•µì‹¬] action=saveCEO, memo=YearEnd íŒŒë¼ë¯¸í„° ì „ì†¡
  const requestUrl = `${APPS_SCRIPT_URL}?action=saveCEO&code=${userCode}&data=${encodedData}&memo=YearEnd&callback=${callbackName}`;
  
  script.src = requestUrl;
  document.body.appendChild(script);
}

// [ì‚¬ìš© ì˜ˆì‹œ] ì—°ë§ ì •ì‚° ì™„ë£Œ ë¡œì§ ë§ˆì§€ë§‰ì— ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì„¸ìš”
// saveYearEndData("0930", { money: 5000, score: 100 });
    </script>
</body>

</html>
